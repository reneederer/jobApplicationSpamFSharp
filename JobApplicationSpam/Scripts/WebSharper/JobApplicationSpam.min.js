(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E;a=window;b=a.JobApplicationSpam=a.JobApplicationSpam||{};c=b.Types=b.Types||{};d=c.JobApplicationPageAction=c.JobApplicationPageAction||{};e=b.Client=b.Client||{};f=e.Language=e.Language||{};g=e.Str=e.Str||{};h=e.AddEmployerAction=e.AddEmployerAction||{};i=a.StartupCode$JobApplicationSpam$Client=a.StartupCode$JobApplicationSpam$Client||{};j=a.IntelliFactory;k=j&&j.Runtime;l=a.WebSharper;m=l&&l.Strings;n=l&&l.Utils;o=l&&l.List;p=l&&l.Arrays;q=l&&l.Concurrency;r=l&&l.Collections;s=r&&r.Map;t=l&&l.Remoting;u=t&&t.AjaxRemotingProvider;v=l&&l.Unchecked;w=l&&l.UI;x=w&&w.Next;y=x&&x.Var;z=l&&l.Seq;A=x&&x.Doc;B=x&&x.AttrModule;C=a.Date;D=r&&r.FSharpMap;E=x&&x.AttrProxy;d=c.JobApplicationPageAction=k.Class({toString:function(){return this.$==1?"Create":this.$==2?"UseCreated":"Upload";}},null,d);d.UseCreated=new d({$:2});d.Create=new d({$:1});d.Upload=new d({$:0});f.German={$:1};f.English={$:0};g.StrUserValuesMobilePhone={$:30};g.StrUserValuesPhone={$:29};g.StrUserValuesCity={$:28};g.StrUserValuesPostcode={$:27};g.StrUserValuesStreet={$:26};g.StrUserValuesLastName={$:25};g.StrUserValuesFirstName={$:24};g.StrUserValuesDegree={$:23};g.StrUserValuesGender={$:22};g.StrSubmitEditUserValues={$:21};g.StrEditUserValues={$:20};g.StrAddFile={$:19};g.StrUserAppliesAs={$:18};g.StrEmailBody={$:17};g.StrEmailSubject={$:16};g.StrTemplateName={$:15};g.StrUploadTemplate={$:14};g.StrBossMobilePhone={$:13};g.StrBossPhone={$:12};g.StrBossEmail={$:11};g.StrBossLastName={$:10};g.StrBossFirstName={$:9};g.StrBossDegree={$:8};g.StrBossGender={$:7};g.StrCompanyCity={$:6};g.StrCompanyPostcode={$:5};g.StrCompanyStreet={$:4};g.StrCompanyName={$:3};g.StrAddEmployer={$:2};g.StrFemale={$:1};g.StrMale={$:0};h.JustAddEmployer={$:2};h.SendJobApplicationToUserOnly={$:1};h.ApplyImmediately={$:0};e.createTemplate=function(){var F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_;function $(bi,bj){var bk,bl,bm;bk=a.jQuery(bi);bl=m.Replace(a.String(bk.val())," ","&nbsp;");bl===""?bk.width(bj):(bm=a.jQuery("<span />").attr("style",((((k.Curried(function(bn,bo,bp,bq){return bn("font-family:"+n.toSafe(bo)+"; font-size: "+n.toSafe(bp)+"; font-weight: "+n.toSafe(bq)+"; visibility: hidden");},4))(a.id))(bi.style.fontFamily))(bi.style.fontSize))(bi.style.fontWeight)).html(bl),bm.appendTo("body"),bk.width(bm.width()),a.jQuery("body span").last().remove());return null;}function ba(bi,bj,bk,bl){var bm,bn,bo;bm=m.Replace(a.String(bi)," ","&nbsp;");bn=a.jQuery("<span />").attr("style",((((k.Curried(function(bp,bq,br,bs){return bp("font-family: "+n.toSafe(bq)+"; font-size: "+n.toSafe(br)+"; font-weight: "+n.toSafe(bs)+"; letter-spacing:0pt; visibility: hidden;");},4))(a.id))(bj))(bk))(bl)).html(bm);bn.appendTo("body");bo=bn.width();a.jQuery("body span:last").remove();return bo;}function bb(bi,bj,bk,bl,bm){var bn,bo,bp,bq,br,bs;bn=0;bo=bi.length;bp=30;while(true)if(bp<0)return bi.length;else{bq=bn+((bo-bn+1)/2>>0);br=m.Substring(bi,0,bq);bs=ba(br,bk,bl,bm);if(bs>bj){if(bo===bq)return bq-1;else{bo=bq;bp=bp-1;}}else{bn=bq;bp=bp-1;}}}function bc(bi,bj,bk,bl,bm){return o.unfold(function(bn){var bo,bp,bq,br,bs,bt,bu,bv;return bn.$==1?(bo=bn.$0,(bp=bb(bo,bj,bk,bl,bm),(bq=(br=p.tryFindIndexBack(function(bw){return o.contains(bw,o.ofArray([" ",".",",",";","-"]));},p.take(bp,m.ToCharArray(bo))),(bs=bp===bo.length,br!=null&&br.$==1?bs?bp:br.$0+1:bp)),(bt=m.Substring(bo,0,bq),(bu=bo.substring(bq),(bv=bn.$1,bu===""?bv.$==1?{$:1,$0:[bt,new o.T({$:1,$0:bv.$0,$1:bv.$1})]}:{$:1,$0:[bt,o.T.Empty]}:bv.$==1?{$:1,$0:[bt,new o.T({$:1,$0:bu,$1:new o.T({$:1,$0:bv.$0,$1:bv.$1})})]}:{$:1,$0:[bt,o.ofArray([bu])]})))))):null;},o.ofArray(p.map(function(bn){return m.EndsWith(bn," ")?m.TrimEnd(bn,[" "])+"\n":bn;},m.SplitChars(bi,["\n"],0))));}function bd(bi){var bj;bj=null;return q.Delay(function(){var bk;bk={name:bi,pages:o.ofArray([{name:"Anschreiben",jobApplicationPageTemplateId:1,map:s.OfArray(p.ofSeq(o.ofArray([["mainText",m.concat("\n",bc(Z.c,a.jQuery("#mainText").width(),"Arial","12pt","normal"))]])))}])};return q.Bind((new u.New()).Async("JobApplicationSpam:JobApplicationSpam.Server.saveHtmlJobApplication:-1556746703",[bk]),function(bl){return q.Return(bl);});});}function be(){var bi;bi=null;return q.Delay(function(){var bj;bj={gender:F.c,degree:G.c,firstName:H.c,lastName:I.c,street:J.c,postcode:K.c,city:L.c,phone:M.c,mobilePhone:N.c};return q.Bind((new u.New()).Async("JobApplicationSpam:JobApplicationSpam.Server.addUserValues:1230958299",[bj]),function(){return q.Return(null);});});}function bf(){var bi;bi=null;return q.Delay(function(){var bj;bj={company:O.c,street:P.c,postcode:Q.c,city:R.c,gender:S.c,degree:T.c,firstName:U.c,lastName:V.c,email:W.c,phone:X.c,mobilePhone:Y.c};return q.Bind((new u.New()).Async("JobApplicationSpam:JobApplicationSpam.Server.addEmployer:-762170454",[bj]),function(bk){return q.Return(bk.$==1?null:{$:1,$0:bk.$0});});});}function bg(){var bi;q.Start((bi=null,q.Delay(function(){return q.Bind(bf(),function(bj){return q.Bind(be(),function(){return q.Bind(bd(_2.c),function(){var bk,bl,bm;return bj==null?q.Zero():(bk={name:_0.c.name,pages:o.ofArray([{name:"Anschreiben",jobApplicationPageTemplateId:1,map:s.OfArray(p.ofSeq(o.ofArray([["mainText",Z.c]])))}])},(bl={gender:F.c,degree:G.c,firstName:H.c,lastName:I.c,street:J.c,postcode:K.c,city:L.c,phone:M.c,mobilePhone:N.c},(bm={company:O.c,street:P.c,postcode:Q.c,city:R.c,gender:S.c,degree:T.c,firstName:U.c,lastName:V.c,email:W.c,phone:X.c,mobilePhone:Y.c},((new u.New()).Send("JobApplicationSpam:JobApplicationSpam.Server.applyNowWithHtmlTemplate:-77811991",[bm,bj.$0,bk,bl]),q.Zero()))));});});});})),null);}function bh(){var bi;q.Start((bi=null,q.Delay(function(){return q.Combine(v.Equals(_1.c,o.ofArray([""]))?q.Bind((new u.New()).Async("JobApplicationSpam:JobApplicationSpam.Server.getHtmlJobApplicationNames:1994133801",[]),function(bj){return!(bj.$==0)?(y.Set(_2,bj.get_Item(0)),y.Set(_1,bj),q.Zero()):q.Zero();}):q.Zero(),q.Delay(function(){return q.Combine(_4.c===""||v.Equals(_3.c,o.ofArray([""]))?q.Bind((new u.New()).Async("JobApplicationSpam:JobApplicationSpam.Server.getHtmlJobApplicationPageTemplates:-611341156",[]),function(bj){y.Set(_3,o.map(function(bk){return bk.name;},bj));y.Set(_6,s.OfArray(p.ofSeq(o.map(function(bk){return[bk.name,bk.html];},bj))));y.Set(_4,z.nth(0,bj).name);y.Set(_5,A.Verbatim(_6.c.get_Item(_4.c)));return q.Zero();}):q.Zero(),q.Delay(function(){return q.Bind((new u.New()).Async("JobApplicationSpam:JobApplicationSpam.Server.getHtmlJobApplicationPages:1412016016",[a.document.getElementById("selectHtmlJobApplicationName").selectedIndex+1]),function(bj){var bk,bl;y.Set(_7,(bk=a.document.getElementById("selectHtmlJobApplicationPageTemplate"),A.Element("ul",[],o.ofSeq(z.delay(function(){return z.map(function(bm){return A.Element("li",[],[A.Element("button",[B.Handler("click",function(){return function(){y.Set(_,_9);y.Set(_4,_3.c.get_Item(bm.htmlJobApplicationPageTemplateId-1));y.Set(_5,A.Verbatim(_6.c.get_Item(_4.c)));return!v.Equals(bk,null)&&!v.Equals(bk,void 0)?(bk.selectedIndex=bm.htmlJobApplicationPageTemplateId-1,a.alert(bk.selectedIndex)):null;};})],[A.TextNode(bm.name)])]);},bj);})))));bl=a.document.getElementById("selectHtmlJobApplicationPageTemplate");return!v.Equals(bl,null)?(bl.selectedIndex=0,a.jQuery(".resizing").each(function(bm,bn){bn.addEventListener("input",function(){return $(bn,150);},true);}),a.jQuery(".field-updating").each(function(bm,bn){bn.addEventListener("input",function(){var bo;bo=a.String(a.jQuery(bn).data("update-field"));bo==="userDegree"?a.alert("userDegree"):bo==="userFirstName"?a.alert("FirstName!"):bo==="userLastName"?a.alert("LastName!"):void 0;a.jQuery((function(bp){return function(bq){return bp("[data-update-field='"+n.toSafe(bq)+"']");};}(a.id))(a.String(a.jQuery(bn).data("update-field")))).each(function(bp,bq){if(!v.Equals(bq,bn)){a.jQuery(bq).val(a.String(a.jQuery(bn).val()));$(bq,150);}});return null;},true);}),a.jQuery("[data-variable-value]").each(function(bm,bn){var bo,bp,bq,br;bo=a.jQuery(bn);a.String(bo.data("variable-value"))==="today"?bo.val(((((k.Curried(function(bs,bt,bu,bv){return bs(a.String(bt)+"."+a.String(bu)+"."+a.String(bv));},4))(a.id))((bp=C.now(),(new C(bp)).getDate())))((bq=C.now(),(new C(bq)).getMonth()+1)))((br=C.now(),(new C(br)).getFullYear()))):void 0;}),q.Zero()):q.Zero();});}));}));})),null);}F=y.Create$1({$:1});G=y.Create$1("");H=y.Create$1("");I=y.Create$1("");J=y.Create$1("");K=y.Create$1("");L=y.Create$1("");M=y.Create$1("");N=y.Create$1("");O=y.Create$1("");P=y.Create$1("");Q=y.Create$1("");R=y.Create$1("");S=y.Create$1({$:0});T=y.Create$1("");U=y.Create$1("");V=y.Create$1("");W=y.Create$1("");X=y.Create$1("");Y=y.Create$1("");y.Create$1("Bewerbung als ...");Z=y.Create$1("");_0=y.Create$1({name:"",pages:o.T.Empty});_1=y.Create$1(o.ofArray([""]));_2=y.Create$1("");_3=y.Create$1(o.ofArray([""]));_4=y.Create$1("");y.Create$1("");_5=y.Create$1(A.Verbatim("<div>nothing here yet</div>"));_6=y.Create$1(new D.New([]));_7=y.Create$1(A.Verbatim("<div>nothin to see here</div>"));_8=A.Element("div",[],[A.TextNode("Choose file (*.pdf or *.odt)"),A.Element("br",[],[]),A.Element("input",[E.Create("type","file")],[]),A.Element("br",[],[]),A.Element("br",[],[]),A.Element("input",[E.Create("type","button"),E.Create("value","Hochladen"),B.Handler("click",function(){return function(){return a.alert("not implemented!");};})],[])]);_9=A.Element("div",[],[A.SelectDyn([E.Create("style","min-width: 300px"),E.Create("id","selectHtmlJobApplicationPageTemplate"),B.Handler("change",function(){return function(){return _6.c.ContainsKey(_4.c)?y.Set(_5,A.Verbatim(_6.c.get_Item(_4.c))):null;};})],a.id,_3.v,_4),A.Element("br",[],[]),A.EmbedView(_5.v),A.Element("br",[],[]),A.Element("br",[],[]),A.Element("input",[E.Create("type","button"),E.Create("value","Abschicken"),B.Handler("click",function(){return function(){bg();return null;};})],[])]);_=y.Create$1(_8);a.jQuery().ready(function(){return bh();});return A.Element("div",[],[A.Element("h1",[],[A.TextNode("Create a template")]),A.SelectDyn([E.Create("style","min-width: 300px"),E.Create("id","selectHtmlJobApplicationName"),B.Handler("click",function(){return function(){return bh();};})],a.id,_1.v,_2),A.Element("br",[],[]),A.TextNode("Pages: "),A.Element("br",[],[]),A.EmbedView(_7.v),A.Element("br",[],[]),A.Element("hr",[],[]),A.Element("br",[],[]),A.Element("div",[],[A.Radio([E.Create("id","upload"),E.Create("radiogroup","pageAction"),B.Handler("change",function(){return function(){return bh();};})],_8,_),A.Element("label",[E.Create("for","upload")],[A.TextNode("Hochladen")]),A.Element("br",[],[]),A.Radio([E.Create("id","create"),E.Create("radiogroup","pageAction"),B.Handler("change",function(){return function(){return bh();};})],_9,_),A.Element("label",[E.Create("for","create")],[A.TextNode("Online erstellen")]),A.Element("br",[],[])]),A.Element("br",[],[]),A.Element("hr",[],[]),A.Element("br",[],[]),A.EmbedView(_.v)]);};e.showSentJobApplications=function(){return A.Element("h1",[],[A.TextNode("hallo")]);};e.register=function(){var F,G,H;F=y.Create$1("");G=y.Create$1("");H=y.Create$1("");return A.Element("form",[B.Handler("submit",function(){return function(){var I;return q.Start((I=null,q.Delay(function(){(new u.New()).Async("JobApplicationSpam:JobApplicationSpam.Server.register:-788765221",[F.c,G.c,H.c]);return q.Return(null);})),null);};})],[A.Element("div",[E.Create("class","form-group")],[A.Element("label",[E.Create("for","txtRegisterEmail")],[A.TextNode("Email")]),A.Input([E.Create("class","form-control"),E.Create("id","txtRegisterEmail"),E.Create("placeholder","Email")],F),A.Element("label",[E.Create("for","txtRegisterPassword1")],[A.TextNode("Password")]),A.PasswordBox([E.Create("class","form-control"),E.Create("id","txtRegisterPassword1"),E.Create("placeholder","Password")],G),A.Element("label",[E.Create("for","txtRegisterPassword2")],[A.TextNode("Password")]),A.PasswordBox([E.Create("class","form-control"),E.Create("id","txtRegisterPassword2"),E.Create("placeholder","Repeat Password")],H),A.Element("input",[E.Create("type","submit"),E.Create("value","Register")],[])])]);};e.login=function(){var F,G;F=y.Create$1("");G=y.Create$1("");return A.Element("form",[B.Handler("submit",function(){return function(){var H;H=(new u.New()).Sync("JobApplicationSpam:JobApplicationSpam.Server.login:1280212622",[F.c,G.c]);return H.$==1?a.alert(m.concat(", ",H.$0)):null;};})],[A.Element("div",[E.Create("class","form-group")],[A.Element("label",[E.Create("for","txtLoginEmail")],[A.TextNode("Email")]),A.Input([E.Create("class","form-control"),E.Create("id","txtLoginEmail"),E.Create("placeholder","Email")],F)]),A.Element("div",[E.Create("class","form-group")],[A.Element("label",[E.Create("for","txtLoginPassword")],[A.TextNode("Password")]),A.PasswordBox([E.Create("class","form-control"),E.Create("id","txtLoginPassword"),E.Create("placeholder","Password")],G)]),A.Element("input",[E.Create("type","submit"),E.Create("value","Login")],[])]);};e.uploadTemplate=function(){return A.Element("div",[],[]);};e.applyNow=function(){return A.Element("div",[],[]);};e.addEmployer=function(){return A.Element("div",[],[]);};e.editUserValues=function(){return A.Element("div",[],[]);};e.currentLanguage=function(){i.$cctor();return i.currentLanguage;};e.translate=function(F,G){return F.$==1?G.$==1?"weiblich":G.$==2?"Arbeitgeber eingeben":G.$==3?"Firmenname":G.$==4?"Straße":G.$==5?"Postleitzahl":G.$==6?"Stadt":G.$==7?"Geschlecht":G.$==8?"Titel":G.$==9?"Vorname":G.$==10?"Nachname":G.$==11?"Email":G.$==12?"Telefon":G.$==13?"Mobiltelefon":G.$==14?"Vorlage hochladen":G.$==16?"Email-Betreff":G.$==17?"Email-Text":G.$==15?"Name der Vorlage":G.$==18?"Beruf":G.$==19?"Datei hinzufügen":G.$==20?"Angaben zum Bewerber":G.$==21?"Speichern":G.$==22?"Geschlecht":G.$==23?"Titel":G.$==24?"Vorname":G.$==25?"Nachname":G.$==26?"Straße":G.$==27?"PLZ":G.$==28?"Stadt":G.$==29?"Telefon":G.$==30?"Mobiltelefon":"männlich":G.$==1?"female":G.$==2?"Add Employer":G.$==3?"Company name":G.$==9?"First name":G.$==10?"Last name":G.$==4?"Street":G.$==5?"Postcode":G.$==6?"City":G.$==7?"Gender":G.$==8?"Degree":G.$==11?"Email":G.$==12?"Phone":G.$==13?"Mobile phone":G.$==14?"Add template":G.$==16?"Email subject":G.$==17?"Email body":G.$==15?"Template name":G.$==18?"Job":G.$==19?"Add file":G.$==20?"Edit your values":G.$==21?"Save values":G.$==22?"Gender":G.$==23?"Degree":G.$==24?"First name":G.$==25?"Last name":G.$==26?"Street":G.$==27?"Postcode":G.$==28?"City":G.$==29?"Phone":G.$==30?"Mobile phone":"male";};i.$cctor=function(){i.$cctor=a.ignore;i.currentLanguage=f.German;};}());
