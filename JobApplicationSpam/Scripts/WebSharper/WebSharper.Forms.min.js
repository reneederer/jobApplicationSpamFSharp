(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M;a=window;b=a.WebSharper=a.WebSharper||{};c=b.Forms=b.Forms||{};d=c.ErrorMessage=c.ErrorMessage||{};e=c.Fresh=c.Fresh||{};f=c.Result=c.Result||{};g=c.Form=c.Form||{};h=c.Utils=c.Utils||{};i=g.Dependent=g.Dependent||{};j=g.Many=g.Many||{};k=j.ItemOperations=j.ItemOperations||{};l=j.Fresh=j.Fresh||{};m=j.Collection=j.Collection||{};n=j.CollectionWithDefault=j.CollectionWithDefault||{};o=g.Builder=g.Builder||{};p=c.Validation=c.Validation||{};q=c.Pervasives=c.Pervasives||{};r=c.Attr=c.Attr||{};s=c.Doc=c.Doc||{};t=c.View=c.View||{};u=a.StartupCode$WebSharper_Forms$Forms=a.StartupCode$WebSharper_Forms$Forms||{};v=a.IntelliFactory;w=v&&v.Runtime;x=b&&b.List;y=b&&b.Collections;z=y&&y.Dictionary;A=b&&b.UI;B=A&&A.Next;C=B&&B.Doc;D=B&&B.View;E=B&&B.Var;F=b&&b.Seq;G=B&&B.Submitter;H=b&&b.Arrays;I=B&&B.Array;J=b&&b.Concurrency;K=b&&b.Unchecked;L=B&&B.AttrProxy;M=B&&B.AttrModule;d=c.ErrorMessage=w.Class({},b.Obj,d);d.Create=function(N,O){return new d.New(N.id,O);};d.Create$1=function(N,O){return new d.New(N,O);};d.New=w.Ctor(function(N,O){this.id=N;this.message=O;},d);e.Id=function(){(e.lastId())[0]++;return"Form"+a.String((e.lastId())[0]);};e.lastId=function(){u.$cctor();return u.lastId;};f.FailWith=function(N,O){return{$:1,$0:x.ofArray([new d.New(O==null?e.Id():O.$0,N)])};};f.Append=function(N,O,P){return O.$==0?P.$==0?{$:0,$0:N(O.$0,P.$0)}:P:P.$==0?O:{$:1,$0:x.append(O.$0,P.$0)};};f.Bind=function(N,O){return O.$==0?N(O.$0):{$:1,$0:O.$0};};f.ApJoin=function(N,O){var P;return N.$==0?(O.$==0?O.$0.$==0?(P=O.$0.$0,false):(P=O.$0.$0,true):(P=O.$0,true))?{$:1,$0:P}:{$:0,$0:N.$0(P)}:O.$==0?{$:1,$0:N.$0}:{$:1,$0:x.append(N.$0,O.$0)};};f.Apply=function(N,O){return N.$==0?O.$==0?{$:0,$0:N.$0(O.$0)}:{$:1,$0:O.$0}:O.$==0?{$:1,$0:N.$0}:{$:1,$0:x.append(N.$0,O.$0)};};f.Map=function(N,O){return O.$==1?{$:1,$0:O.$0}:{$:0,$0:N(O.$0)};};f.IsFailure=function(N){return N.$==1&&true;};f.IsSuccess=function(N){return N.$==1?false:true;};g.New=function(N,O,P){return{id:N,view:O,render:P};};h.memoize=function(N){var O;O=new z.New$5();return function(P){var Q;return O.ContainsKey(P)?O.get_Item(P):(Q=N(P),(O.set_Item(P,Q),Q));};};i=g.Dependent=w.Class({RenderDependent:function(N){return C.BindView(function(O){return O.$==1?C.Empty():O.$0.render(N);},this.pOut);}},b.Obj,i);i.New=w.Ctor(function(N,O){this.renderPrimary=N;this.pOut=O;this.out=D.Bind(function(P){return P.$==1?D.Const({$:1,$0:P.$0}):P.$0.view;},this.pOut);},i);i.Make=function(N,O){var P;return new i.New(N.render,D.Map((P=h.memoize(function(Q){var R;R=O(Q);return g.New(R.id,R.view,R.render);}),function(Q){return f.Map(P,Q);}),N.view));};k=j.ItemOperations=w.Class({},b.Obj,k);k.New=w.Ctor(function(N,O,P){this["delete"]=N;this.moveUp=O;this.moveDown=P;},k);l.Int=function(){u.$cctor();return u.Int;};m=j.Collection=w.Class({adderView:function(N){N.$==0?this.add(N.$0):void 0;return C.Empty();},add:function(N){this.arr.push(this.mk(N));E.Update(this["var"],a.id);},mk:function(N){var O,P,Q,R,S,T,U,V,W;function X(Y,Z,_0){return P===_0;}O=this;P=(l.Int())();Q=function(Y){return F.findIndex(function(Z){return X(Z[0],Z[1],Z[2]);},Y);};R=D.Map(Q,this["var"].v);S=new G.New(D.Map(function(Y){return Y===0?{$:1,$0:x.T.Empty}:{$:0,$0:true};},R),H.length(this.arr)===0?{$:1,$0:x.T.Empty}:{$:0,$0:false});T=D.Map(function(Y){var Z;if(Y.$==0)if(Y.$0){Z=Q(O.arr);j["List`1.Swap"](O.arr,Z,Z-1);E.Update(O["var"],a.id);}},S.view);U=new G.New(D.Map(function(Y){return Y===H.length(O.arr)-1?{$:1,$0:x.T.Empty}:{$:0,$0:true};},R),{$:1,$0:x.T.Empty});V=D.Map(function(Y){var Z;if(Y.$==0)if(Y.$0){Z=Q(O.arr);j["List`1.Swap"](O.arr,Z,Z+1);E.Update(O["var"],a.id);}},U.view);W=this.p(N);return[g.New(W.id,D.Map2(a.id,W.view,D.Map2(function(){return null;},T,V)),W.render),new k.New(function(){var Y,Z;Y=O.arr;Z=Q(O.arr);Y.splice.apply(Y,[Z,1]);E.Update(O["var"],a.id);},S,U),P];},RenderAdder:function(N){var O,P;O=this;P=this.adder.render(N);return C.Append(C.EmbedView(D.Map(function(Q){return O.adderView(Q);},this.adder.view)),P);},Render:function(N){function O(Q,R,S){return S;}function P(Q,R,S){return Q.render(N(R));}return C.ConvertBy(function(Q){return O(Q[0],Q[1],Q[2]);},function(Q){return P(Q[0],Q[1],Q[2]);},this.changesView);}},b.Obj,m);m.New=w.Ctor(function(N,O,P){var Q,R,S;function T(U){return Q.mk(U);}Q=this;this.p=N;this.adder=P;this.arr=[];this["var"]=E.Create$1(this.arr);F.iter((R=(S=this.arr,function(U){S.push(U);}),function(U){return R(T(U));}),O);this.changesView=D.Bind(function(U){var V;function W(X){var Y;Y=a.Array.prototype.slice.call(arguments);return D.Map(function(){return[Y];},X.view);}V=U.slice();return I.MapTreeReduce(function(X){return W(X[0]);},D.Const([]),function(X,Y){return D.Map2(F.append,X,Y);},V);},this["var"].v);this.out=D.Bind(function(U){var V,W,X;function Y(_0,_1,_2){function _3(_4){return[_4];}return D.Map(function(_4){return f.Map(_3,_4);},_0.view);}function Z(_0,_1){return f.Append(F.append,_0,_1);}V=U.slice();W=D.Const({$:0,$0:[]});X=(w.Curried3(D.Map2))(Z);return I.MapTreeReduce(function(_0){return Y(_0[0],_0[1],_0[2]);},W,function(_0,_1){return(X(_0))(_1);},V);},this["var"].v);},m);n=j.CollectionWithDefault=w.Class({AddOne:function(){this.add(this["default"]);}},m,n);n.New=w.Ctor(function(N,O,P,Q){m.New.call(this,N,O,P);this["default"]=Q;},n);j["List`1.Swap"]=function(N,O,P){var Q;Q=H.get(N,O);H.set(N,O,H.get(N,P));H.set(N,P,Q);};o.Do={$:0};g.Dependent$1=function(N,O){var P;P=i.Make(N,O);return g.New(e.Id(),P.out,function(Q){return Q(P);});};g.Many$1=function(N,O,P){var Q;Q=new n.New(P,N,P(O),O);return g.New(e.Id(),Q.out,function(R){return R(Q);});};g.ManyForm=function(N,O,P){var Q;Q=new m.New(P,N,O);return g.New(e.Id(),Q.out,function(R){return R(Q);});};g.RunResult=function(N,O){return g.MapResult(function(P){N(P);return P;},O);};g.Run=function(N,O){return g.Map(function(P){N(P);return P;},O);};g.FlushErrors=function(N){return g.MapResult(function(O){return O.$==1?{$:1,$0:x.T.Empty}:O;},N);};g.MapRenderArgs=function(N,O){return g.New(O.id,O.view,function(P){return P(O.render(N));});};g.MapAsync=function(N,O){return g.MapAsyncResult(function(P){var Q,R,S,T;return P.$==1?(Q=P.$0,(R=null,J.Delay(function(){return J.Return({$:1,$0:Q});}))):(S=P.$0,(T=null,J.Delay(function(){return J.Bind(N(S),function(U){return J.Return({$:0,$0:U});});})));},O);};g.MapToAsyncResult=function(N,O){return g.MapAsyncResult(function(P){var Q,R,S,T;return P.$==1?(Q=P.$0,(R=null,J.Delay(function(){return J.Return({$:1,$0:Q});}))):(S=P.$0,(T=null,J.Delay(function(){return N(S);})));},O);};g.MapAsyncResult=function(N,O){return g.New(O.id,D.MapAsync(N,O.view),O.render);};g.Map=function(N,O){return g.MapResult(function(P){return f.Map(N,P);},O);};g.MapToResult=function(N,O){return g.MapResult(function(P){return f.Bind(N,P);},O);};g.MapResult=function(N,O){return g.New(O.id,D.Map(N,O.view),O.render);};g.TransmitViewMap=function(N,O){return g.TransmitViewMapResult(function(P){return f.Map(N,P);},O);};g.TransmitViewMapResult=function(N,O){return g.New(O.id,O.view,function(P){return(O.render(P))(D.Map(N,O.view));});};g.TransmitView=function(N){return g.New(N.id,N.view,function(O){return(N.render(O))(N.view);});};g.WithSubmit=function(N){var O;O=new G.New(N.view,{$:1,$0:x.T.Empty});return g.New(e.Id(),O.view,function(P){return(N.render(P))(O);});};g.ApJoin=function(N,O){var P,Q;return g.New(e.Id(),D.Map2(f.ApJoin,N.view,O.view),(P=N.render,(Q=O.render,function(R){return Q(P(R));})));};g.Apply=function(N,O){var P,Q;return g.New(e.Id(),D.Map2(f.Apply,N.view,O.view),(P=N.render,(Q=O.render,function(R){return Q(P(R));})));};g.YieldOption=function(N,O){var P;P=E.Create$1(N==null?O:N.$0);return g.New(P.RId(),D.Map(function(Q){return{$:0,$0:K.Equals(Q,O)?null:{$:1,$0:Q}};},P.RView()),function(Q){return Q(P);});};g.YieldFailure=function(){var N,O;N=E.Create$1(void 0);O=N.RView();return g.New(N.RId(),D.SnapshotOn({$:1,$0:x.T.Empty},O,D.Map(function(P){return{$:0,$0:P};},O)),function(P){return P(N);});};g.Yield=function(N){return g.YieldVar(E.Create$1(N));};g.YieldVar=function(N){return g.New(N.RId(),D.Map(function(O){return{$:0,$0:O};},N.RView()),function(O){return O(N);});};g.ReturnFailure=function(){return g.New(e.Id(),D.Const({$:1,$0:x.T.Empty}),a.id);};g.Return=function(N){return g.New(e.Id(),D.Const({$:0,$0:N}),a.id);};g.Render=function(N,O){var P;P=O.render(N);return C.Append(C.EmbedView(D.Map(function(){return C.Empty();},O.view)),P);};g.Create=function(N,O){return g.New(e.Id(),N,O);};p.MapValidCheckedInput=function(N,O){return g.MapResult(function(P){return P.$==1?{$:1,$0:P.$0}:P.$0.$==0?{$:0,$0:P.$0.$0}:{$:1,$0:x.ofArray([d.Create(O,N)])};},O);};p.IsMatch=function(N,O,P){var Q;return p.Is((Q=new a.RegExp(N),function(R){return Q.test(R);}),O,P);};p.IsNotEmpty=function(N,O){return p.Is(function(P){return P!=="";},N,O);};p.Is=function(N,O,P){return g.MapResult(function(Q){return Q.$==1?Q:N(Q.$0)?Q:{$:1,$0:x.ofArray([new d.New(P.id,O)])};},P);};q.op_LessMultiplyQmarkGreater=function(N,O){return g.ApJoin(N,O);};q.op_LessMultiplyGreater=function(N,O){return g.Apply(N,O);};r.SubmitterValidate=function(N){var O;return L.Append(M.Handler("click",function(){return function(){return N.Trigger();};}),(O=D.Const("disabled"),M.DynamicPred("disabled",D.Map(f.IsFailure,N.input),O)));};s.ShowSuccess=function(N,O){return C.BindView(function(P){return P.$==1?C.Empty():O(P.$0);},N);};s.ShowErrors=function(N,O){return C.BindView(function(P){return P.$==1?O(P.$0):C.Empty();},N);};s.ButtonValidate=function(N,O,P){return C.Element("button",F.append([r.SubmitterValidate(P)],O),[C.TextNode(N)]);};t.Through=function(N,O){return D.Map(function(P){return P.$==1?{$:1,$0:x.filter(function(Q){return Q.id===O.id;},P.$0)}:P;},N);};t.Through$1=function(N,O){return D.Map(function(P){return P.$==1?{$:1,$0:x.filter(function(Q){return Q.id===O.RId();},P.$0)}:P;},N);};u.$cctor=function(){var N;u.$cctor=a.ignore;u.lastId=[0];u.Int=(N=[0],function(){N[0]++;return N[0];});};}());
