(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W;a=window;b=a.WebSharper=a.WebSharper||{};c=b.Piglets=b.Piglets||{};d=c.Id=c.Id||{};e=b&&b.Obj;f=c.ErrorMessage=c.ErrorMessage||{};g=c.Result=c.Result||{};h=c.Reader=c.Reader||{};i=c.Stream=c.Stream||{};j=c.Disposable=c.Disposable||{};k=c.ConstReader=c.ConstReader||{};l=c.ConcreteWriter=c.ConcreteWriter||{};m=c.ConcreteReader=c.ConcreteReader||{};n=c.Submitter=c.Submitter||{};o=c.Piglet=c.Piglet||{};p=c.Validation=c.Validation||{};q=c.Pervasives=c.Pervasives||{};r=q["Writer`1"]=q["Writer`1"]||{};s=c.Many=c.Many||{};t=s.Operations=s.Operations||{};u=s.Stream=s.Stream||{};v=s.UnitStream=s.UnitStream||{};w=c.Choose=c.Choose||{};x=w.Stream=w.Stream||{};y=o.Builder=o.Builder||{};z=a.StartupCode$WebSharper_Piglets$Piglets=a.StartupCode$WebSharper_Piglets$Piglets||{};A=c.Controls=c.Controls||{};B=A.HtmlContainer=A.HtmlContainer||{};C=a.StartupCode$WebSharper_Piglets$Controls=a.StartupCode$WebSharper_Piglets$Controls||{};D=a.IntelliFactory;E=D&&D.Runtime;F=b&&b.List;G=b&&b.Util;H=D&&D.Reactive;I=H&&H.HotStream;J=b&&b.Concurrency;K=b&&b.Arrays;L=b&&b.Seq;M=b&&b.Collections;N=M&&M.Dictionary;O=b&&b.Enumerator;P=b&&b.Operators;Q=b&&b.Unchecked;R=b&&b.Html;S=R&&R.Client;T=S&&S.Operators;U=S&&S.Attr;V=S&&S.Tags;W=S&&S.EventsPervasives;d.next=function(){z.$cctor();return z.next;};f=c.ErrorMessage=E.Class({get_Source:function(){return this.source;},get_Message:function(){return this.message;}},e,f);f.Create=function(X,Y){return new f.New(X,Y.get_Id());};f.New=E.Ctor(function(X,Y){this.message=X;this.source=Y;},f);g=c.Result=E.Class({get_isSuccess:function(){return this.$==1?false:true;}},null,g);g.Bind=function(X){return function(Y){return Y.$==1?new g({$:1,$0:Y.$0}):X(Y.$0);};};g.Iter=function(X){return function(Y){if(Y.$==1);else X(Y.$0);};};g.Map2=function(X,Y,Z){var _0;switch(Y.$==1?Z.$==1?(_0=[Y.$0,Z.$0],1):(_0=Y.$0,2):Z.$==1?(_0=Z.$0,2):(_0=[Y.$0,Z.$0],0)){case 0:return new g({$:0,$0:X(_0[0],_0[1])});break;case 1:return new g({$:1,$0:F.append(_0[0],_0[1])});break;case 2:return new g({$:1,$0:_0});break;}};g.Map=function(X,Y){return Y.$==1?new g({$:1,$0:Y.$0}):new g({$:0,$0:X(Y.$0)});};g.Join=function(X){var Y;return(X.$==0?X.$0.$==0?(Y=X.$0.$0,false):(Y=X.$0.$0,true):(Y=X.$0,true))?new g({$:1,$0:Y}):new g({$:0,$0:Y});};g.Ap=function(X,Y){var Z;switch(X.$==1?Y.$==1?(Z=[X.$0,Y.$0],2):(Z=X.$0,1):Y.$==1?(Z=Y.$0,1):(Z=[X.$0,Y.$0],0)){case 0:return new g({$:0,$0:Z[0](Z[1])});break;case 1:return new g({$:1,$0:Z});break;case 2:return new g({$:1,$0:F.append(Z[0],Z[1])});break;}};g.Failwith=function(X){return new g({$:1,$0:F.ofArray([new f.New(X,0)])});};h=c.Reader=E.Class({Through:function(X){var Y,Z;Y=this;Z=new i.New(this.get_Latest(),null);X.Subscribe(function(_0){var _1,_2;if(_0.$==1){_1=Y.get_Latest();_2=F.filter(function(_3){return _3.get_Source()===Y.get_Id();},_0.$0);_2.$==0?Z.Trigger(Y.get_Latest()):_1.$==1?Z.Trigger(new g({$:1,$0:F.append(_1.$0,_2)})):Z.Trigger(new g({$:1,$0:_2}));}else Z.Trigger(Y.get_Latest());});return Z;},get_Id:function(){return this.id;},SubscribeImmediate:function(X){return this.Subscribe(X);}},e,h);h.ConstResult=function(X){return new k.New(X);};h.Const=function(X){return new k.New(new g({$:0,$0:X}));};h.MapToResult=function(X,Y){return h.MapResult(g.Bind(X),Y);};h.Map2=function(X,Y,Z){return h.MapResult2(function(_0,_1){return g.Map2(X,_0,_1);},Y,Z);};h.Map=function(X,Y){return h.MapResult(function(Z){return g.Map(X,Z);},Y);};h.MapResult2=function(X,Y,Z){var _0;_0=new i.New(X(Y.get_Latest(),Z.get_Latest()),null);Y.Subscribe(function(_1){_0.Trigger(X(_1,Z.get_Latest()));});Z.Subscribe(function(_1){_0.Trigger(X(Y.get_Latest(),_1));});return _0;};h.MapResult=function(X,Y){var Z;function _0(_1){Z.Trigger(_1);}Z=new i.New(X(Y.get_Latest()),null);Y.Subscribe(function(_1){return _0(X(_1));});return Z;};h.New=E.Ctor(function(X){this.id=X;},h);i=c.Stream=E.Class({Write:function(X){var Y;Y=this;return new l.New$1(function(Z){if(Z.$==0)Y.Trigger(new g({$:0,$0:X}));else Y.Trigger(new g({$:1,$0:Z.$0}));});},Trigger:function(X){this.s.Trigger(X);},Subscribe:function(X){return this.s.Subscribe(G.observer(X));},get_Latest:function(){return this.s.Latest[0].$0;},WebSharper_Piglets_Writer_1$Trigger:function(X){this.Trigger(X);}},h,i);i.New=E.Ctor(function(X,Y){i.New$1.call(this,I.New$1(X),Y);},i);i.New$1=E.Ctor(function(X,Y){h.New.call(this,Y==null?(d.next())():Y.$0);this.s=X;},i);j=c.Disposable=E.Class({Dispose:function(){this.dispose();}},e,j);j.New=E.Ctor(function(X){this.dispose=X;},j);k=c.ConstReader=E.Class({Subscribe:function(X){return new j.New(a.ignore);},get_Latest:function(){return this.x;}},h,k);k.New=E.Ctor(function(X){h.New.call(this,(d.next())());this.x=X;},k);l=c.ConcreteWriter=E.Class({WebSharper_Piglets_Writer_1$Trigger:function(X){this.trigger(X);}},e,l);l.New=function(X){return new l.New$1(function(Y){if(Y.$==1);else X(Y.$0);});};l.New$1=E.Ctor(function(X){this.trigger=X;},l);m=c.ConcreteReader=E.Class({Subscribe:function(X){return this.subscribe(X);},get_Latest:function(){return this.latest();}},h,m);m.New=E.Ctor(function(X,Y){h.New.call(this,(d.next())());this.latest=X;this.subscribe=Y;},m);n=c.Submitter=E.Class({Trigger:function(){this.writer.WebSharper_Piglets_Writer_1$Trigger(new g({$:0,$0:null}));},get_Output:function(){return this.output;},get_Input:function(){return this.input;},Subscribe:function(X){return this.output.Subscribe(X);},get_Latest:function(){return this.output.get_Latest();},WebSharper_Piglets_Writer_1$Trigger:function(X){this.writer.WebSharper_Piglets_Writer_1$Trigger(X);}},h,n);n.New=E.Ctor(function(X,Y){var Z;Z=this;h.New.call(this,(d.next())());this.input=X;this.output=new i.New(new g({$:1,$0:F.T.Empty}),null);this.writer=new l.New$1(function(_0){var _1,_2;_2=Z.input.get_Latest();switch(_0.$==0?_2.$==0?(_1=_2.$0,2):(_1=_2.$0,1):_2.$==0?(_1=_0.$0,1):(_1=[_0.$0,_2.$0],0)){case 0:Z.output.Trigger(new g({$:1,$0:F.append(_1[0],_1[1])}));break;case 1:Z.output.Trigger(new g({$:1,$0:_1}));break;case 2:Z.output.Trigger(new g({$:0,$0:_1}));break;}});Y?this.input.Subscribe(function(){var _0,_1;_0=Z.output.get_Latest();_0.$==1&&(_0.$0.$==0&&true)?void 0:Z.output.Trigger(new g({$:1,$0:F.T.Empty}));}):void 0;},n);i.Map=function(X,Y,Z){var _0,_1,_2;_0=new i.New(g.Map(X,Z.get_Latest()),{$:1,$0:Z.get_Id()});_1=[Z.get_Latest()];_2=[_0.get_Latest()];Z.Subscribe(function(_3){if(_1[0]!==_3){_2[0]=g.Map(X,_3);_0.Trigger(_2[0]);}});_0.Subscribe(function(_3){if(_2[0]!==_3){_1[0]=g.Map(Y,_3);Z.Trigger(_1[0]);}});return _0;};i.ApJoin=function(X,Y){var Z;Z=new i.New(g.Ap(X.get_Latest(),g.Join(Y.get_Latest())),null);X.Subscribe(function(_0){Z.Trigger(g.Ap(_0,g.Join(Y.get_Latest())));});Y.Subscribe(function(_0){Z.Trigger(g.Ap(X.get_Latest(),g.Join(_0)));});return Z;};i.Ap=function(X,Y){var Z;Z=new i.New(g.Ap(X.get_Latest(),Y.get_Latest()),null);X.Subscribe(function(_0){Z.Trigger(g.Ap(_0,Y.get_Latest()));});Y.Subscribe(function(_0){Z.Trigger(g.Ap(X.get_Latest(),_0));});return Z;};o=c.Piglet=E.Class({get_Stream:function(){return this.stream;}},null,o);o.New=function(X,Y){return new o({stream:X,view:Y});};p.IsMatch=function(X,Y,Z){return p.Is(p.Match(X),Y,Z);};p.IsNotEmpty=function(X,Y){return p.Is(p.NotEmpty,X,Y);};p.Match=function(X){var Y;Y=new a.RegExp(X);return function(Z){return Y.test(Z);};};p.NotEmpty=function(X){return X!=="";};p.Is=function(X,Y,Z){var _0;_0=new i.New(Z.stream.get_Latest(),{$:1,$0:Z.stream.get_Id()});Z.stream.Subscribe(function(_1){if(_1.$==0){if(X(_1.$0))_0.Trigger(new g({$:0,$0:_1.$0}));else _0.Trigger(new g({$:1,$0:F.ofArray([new f.New(Y,_0.get_Id())])}));}else _0.Trigger(new g({$:1,$0:_1.$0}));});return o.New(_0,Z.view);};p["Is'"]=function(X,Y,Z){var _0;_0=new i.New(Z.stream.get_Latest(),{$:1,$0:Z.stream.get_Id()});Z.stream.Subscribe(function(_1){if(_1.$==0){if(X(_1.$0))_0.Trigger(new g({$:0,$0:_1.$0}));else _0.Trigger(new g({$:1,$0:F.ofArray([Y])}));}else _0.Trigger(new g({$:1,$0:_1.$0}));});return o.New(_0,Z.view);};q.op_LessMultiplyQmarkGreater=function(X,Y){var Z,_0;return o.New(i.ApJoin(X.stream,Y.stream),(Z=X.view,(_0=Y.view,function(_1){return _0(Z(_1));})));};q.op_LessMultiplyGreater=function(X,Y){var Z,_0;return o.New(i.Ap(X.stream,Y.stream),(Z=X.view,(_0=Y.view,function(_1){return _0(Z(_1));})));};r.WrapAsync=function(X,Y){return r.WrapToAsyncResult(function(Z){var _0;_0=null;return J.Delay(function(){return J.Bind(X(Z),function(_1){return J.Return(new g({$:0,$0:_1}));});});},Y);};r.WrapToAsyncResult=function(X,Y){return r.WrapAsyncResult(function(Z){var _0;_0=null;return J.Delay(function(){return Z.$==1?J.Return(new g({$:1,$0:Z.$0})):X(Z.$0);});},Y);};r.WrapAsyncResult=function(X,Y){return new l.New$1(function(Z){var _0;J.Start((_0=null,J.Delay(function(){return J.Bind(X(Z),function(_1){Y.WebSharper_Piglets_Writer_1$Trigger(_1);return J.Zero();});})),null);});};r.WrapResult=function(X,Y){return new l.New$1(function(Z){Y.WebSharper_Piglets_Writer_1$Trigger(X(Z));});};r.WrapToResult=function(X,Y){return new l.New$1(function(Z){Y.WebSharper_Piglets_Writer_1$Trigger((g.Bind(X))(Z));});};r.Wrap=function(X,Y){return new l.New$1(function(Z){Y.WebSharper_Piglets_Writer_1$Trigger(g.Map(X,Z));});};t=s.Operations=E.Class({get_MoveDown:function(){return this.moveDown;},get_MoveUp:function(){return this.moveUp;},get_Delete:function(){return l.New(this["delete"]);}},e,t);t.New=E.Ctor(function(X,Y,Z){this["delete"]=X;this.moveUp=Y;this.moveDown=Z;},t);u=s.Stream=E.Class({update:function(){this.out.Trigger(g.Map(function(X){return K.ofList(F.rev(X));},L.fold(function(X,Y){var Z,_0;_0=Y.get_Latest();switch(X.$==1?_0.$==1?(Z=[X.$0,_0.$0],2):(Z=X.$0,1):_0.$==1?(Z=_0.$0,1):(Z=[X.$0,_0.$0],0)){case 0:return new g({$:0,$0:new F.T({$:1,$0:Z[1],$1:Z[0]})});break;case 1:return new g({$:1,$0:Z});break;case 2:return new g({$:1,$0:F.append(Z[1],Z[0])});break;}},new g({$:0,$0:F.T.Empty}),this.streams)));},AddRender:function(X){return this.adder.view(X);},get_Add:function(){return this.adder.stream;},Render:function(X,Y){var Z,_0;function _1(_2){var _3,_4,_5,_6,_7,_8,_9,_;function $(){return L.findIndex(function(bd){return bd.get_Id()===_3.stream.get_Id();},Z.streams);}function ba(bd){var be;if(bd>0&&bd<K.length(Z.streams)){be=K.get(Z.streams,bd);K.set(Z.streams,bd,K.get(Z.streams,bd-1));K.set(Z.streams,bd-1,be);X.WebSharper_Piglets_Container_2$MoveUp(bd);Z.update();}}function bb(){return $()>0?new g({$:0,$0:null}):new g({$:1,$0:F.T.Empty});}function bc(){return $()<K.length(Z.streams)-1?new g({$:0,$0:null}):new g({$:1,$0:F.T.Empty});}_3=Z.p(_2);Z.streams.push(_3.stream);_3.stream.Subscribe(function(){Z.update();});_4=new i.New(bb(),null);_5=new i.New(bc(),null);_6=Z.out.Subscribe(function(){_4.Trigger(bb());_5.Trigger(bc());});_7=new n.New(_4,false);_8=new n.New(_5,false);_9=_7.Subscribe(g.Iter(function(){ba($());}));_=_8.Subscribe(g.Iter(function(){ba($()+1);}));X.WebSharper_Piglets_Container_2$Add(_3.view(Y(new t.New(function(){var bd,be;bd=$();be=Z.streams;be.splice.apply(be,[bd,1]);X.WebSharper_Piglets_Container_2$Remove(bd);_6.Dispose();_9.Dispose();_.Dispose();Z.update();},_7,_8))));}Z=this;_0=this.out.get_Latest();_0.$==0?K.iter(_1,_0.$0):void 0;this.adder.stream.Subscribe(function(_2){if(_2.$==0)_1(_2.$0);});return X.WebSharper_Piglets_Container_2$get_Container();},get_Latest:function(){return this.out.get_Latest();},Subscribe:function(X){return this.out.Subscribe(X);}},h,u);u.New=E.Ctor(function(X,Y,Z){h.New.call(this,Y.get_Id());this.p=X;this.out=Y;this.adder=Z;this.streams=[];},u);v=s.UnitStream=E.Class({get_Add$1:function(){return this.submitStream;}},u,v);v.New=E.Ctor(function(X,Y,Z,_0){var _1,_2,_3;u.New.call(this,X,Y,Z);this.submitStream=(_1=new i.New(new g({$:1,$0:F.T.Empty}),null),(_2=(_3=Z.get_Stream(),function(_4){_3.Trigger(_4);}),(_1.Subscribe(function(_4){if(_4.$==0)_2(new g({$:0,$0:_0}));else _2(new g({$:1,$0:_4.$0}));}),_1)));},v);x=w.Stream=E.Class({Choice:function(X,Y){var Z,_0,_1;Z=this;_0=new N.New$5();_1=[false];this.subscriptions[0]=new F.T({$:1,$0:this.pStream.Subscribe(function(_2){var _3,_4,_5;if(_2.$==0){_3=_2.$0[1];_4=_2.$0[0];_5=_0.ContainsKey(_4)?_0.get_Item(_4):_3.view(Y);Z.out.Trigger(_3.stream.get_Latest());_1[0]?X.WebSharper_Piglets_Container_2$Remove(0):void 0;_1[0]=true;X.WebSharper_Piglets_Container_2$Add(_5);}}),$1:this.subscriptions[0]});return X.WebSharper_Piglets_Container_2$get_Container();},get_ChooserStream:function(){return this.chooser.stream;},Chooser:function(X){return this.chooser.view(X);},Subscribe:function(X){return this.out.Subscribe(X);},get_Latest:function(){return this.out.get_Latest();},Dispose:function(){var X,Y;X=this.subscriptions[0];Y=O.Get(X);try{while(Y.MoveNext())Y.Current().Dispose();}finally{if("Dispose"in Y)Y.Dispose();}L.iter(function(Z){(P.KeyValue(Z))[1][1].Dispose();},this.choiceSubscriptions);}},h,x);x.New=E.Ctor(function(X,Y,Z){var _0;_0=this;h.New.call(this,Z.get_Id());this.chooser=X;this.out=Z;this.pStream=new i.New(new g({$:1,$0:F.T.Empty}),null);this.choiceSubscriptions=new N.New$5();this.subscriptions=[F.ofArray([this.chooser.stream.Subscribe(function(_1){_0.pStream.Trigger(g.Map(function(_2){var _3,_4;return[_2,_0.choiceSubscriptions.ContainsKey(_2)?(_0.choiceSubscriptions.get_Item(_2))[0]:(_3=Y(_2),(_0.choiceSubscriptions.set_Item(_2,[_3,_3.stream.Subscribe((_4=_0.out,function(_5){_4.Trigger(_5);}))]),_3))];},_1));})])];},x);y=o.Builder=E.Class({Zero:function(){return o.ReturnFailure();},YieldFrom:a.id,Yield:function(X){return o.Yield(X);},ReturnFrom:a.id,Return:function(X){return o.Return(X);},Bind:function(X,Y){return o.Choose(X,Y);}},null,y);y.Do=new y({$:0});o.Confirm=function(X,Y,Z){var _0,_1;function _2(_3,_4){return[_3,_4];}_0=o.Yield(X);return o.MapViewArgs(function(_3){return function(_4){return _2(_3,_4);};},o.Map(function(_3){return _3[0];},(_1=q.op_LessMultiplyGreater(q.op_LessMultiplyGreater(o.Return(function(_3){return function(_4){return[_3,_4];};}),Y(o.Yield(X))),_0),p["Is'"](function(_3){return Q.Equals(_3[0],_3[1]);},f.Create(Z,_0.get_Stream()),_1))));};o.YieldOption=function(X,Y){function Z(_1){return _1!=null&&_1.$==1?_1.$0:Y;}function _0(_1){return Q.Equals(_1,Y)?null:{$:1,$0:_1};}return o.MapViewArgs(function(_1){return i.Map(Z,_0,_1);},o.Yield(X));};o.MapViewArgs=function(X,Y){var Z;return o.New(Y.stream,(Z=Y.view,function(_0){return _0(Z(X));}));};o.Render=function(X,Y){return Y.view(X);};o.Run=function(X,Y){return o.RunResult(g.Iter(X),Y);};o.RunResult=function(X,Y){Y.stream.Subscribe(X);return Y;};o.FlushErrors=function(X){return o.MapResult(function(Y){return Y.$==1?new g({$:1,$0:F.T.Empty}):Y;},X);};o.MapWithWriter=function(X,Y){function Z(_0,_1){return _1.$==0?X(_0,_1.$0):_0.WebSharper_Piglets_Writer_1$Trigger(new g({$:1,$0:_1.$0}));}return o.MapResultWithWriter(function(_0){return function(_1){return Z(_0,_1);};},Y);};o.MapResultWithWriter=function(X,Y){var Z;Z=new i.New(new g({$:1,$0:F.T.Empty}),null);Y.stream.Subscribe(X(Z));return o.New(Z,Y.view);};o.MapAsync=function(X,Y){return o.MapAsyncResult(function(Z){var _0,_1;return Z.$==0?(_0=Z.$0,(_1=null,J.Delay(function(){return J.Bind(X(_0),function(_2){return J.Return(new g({$:0,$0:_2}));});}))):J.Return(new g({$:1,$0:Z.$0}));},Y);};o.MapToAsyncResult=function(X,Y){return o.MapAsyncResult(function(Z){return Z.$==0?X(Z.$0):J.Return(new g({$:1,$0:Z.$0}));},Y);};o.MapAsyncResult=function(X,Y){var Z,_0;Z=new i.New(new g({$:1,$0:F.T.Empty}),null);Y.stream.Subscribe(function(_1){var _2;J.Start((_2=null,J.Delay(function(){return J.Bind(X(_1),function(_3){Z.Trigger(_3);return J.Return(null);});})),null);});J.Start((_0=null,J.Delay(function(){return J.Bind(X(Y.stream.get_Latest()),function(_1){Z.Trigger(_1);return J.Return(null);});})),null);return o.New(Z,Y.view);};o.Map=function(X,Y){return o.MapResult(function(Z){return Z.$==0?new g({$:0,$0:X(Z.$0)}):new g({$:1,$0:Z.$0});},Y);};o.MapToResult=function(X,Y){return o.MapResult(function(Z){return Z.$==0?X(Z.$0):new g({$:1,$0:Z.$0});},Y);};o.MapResult=function(X,Y){var Z;function _0(_1){Z.Trigger(_1);}Z=new i.New(X(Y.stream.get_Latest()),null);Y.stream.Subscribe(function(_1){return _0(X(_1));});return o.New(Z,Y.view);};o.TransmitWriter=function(X){var Y;function Z(_0,_1){return(X.view(_0))(_1);}return o.New(X.stream,(Y=X.stream,function(_0){return Z(_0,Y);}));};o.TransmitReader=function(X){var Y;function Z(_0,_1){return(X.view(_0))(_1);}return o.New(X.stream,(Y=X.stream,function(_0){return Z(_0,Y);}));};o.TransmitReaderMap=function(X,Y){var Z;function _0(_1,_2){return(Y.view(_1))(_2);}return o.New(Y.stream,(Z=h.Map(X,Y.stream),function(_1){return _0(_1,Z);}));};o.TransmitReaderMapToResult=function(X,Y){var Z;function _0(_1,_2){return(Y.view(_1))(_2);}return o.New(Y.stream,(Z=h.MapToResult(X,Y.stream),function(_1){return _0(_1,Z);}));};o.TransmitReaderMapResult=function(X,Y){var Z;function _0(_1,_2){return(Y.view(_1))(_2);}return o.New(Y.stream,(Z=h.MapResult(X,Y.stream),function(_1){return _0(_1,Z);}));};o.TransmitStream=function(X){var Y;function Z(_0,_1){return(X.view(_0))(_1);}return o.New(X.stream,(Y=X.stream,function(_0){return Z(_0,Y);}));};o.Many=function(X,Y){return o.ManyInit([X],X,Y);};o.ManyInit=function(X,Y,Z){var _0,_1;_0=new i.New(new g({$:0,$0:X}),null);_1=new v.New(Z,_0,Z(Y),Y);return o.New(_0,function(_2){return _2(_1);});};o.ManyPiglet=function(X,Y,Z){var _0,_1;_0=new i.New(new g({$:0,$0:X}),null);_1=new u.New(Z,_0,Y);return o.New(_0,function(_2){return _2(_1);});};o.Choose=function(X,Y){var Z,_0;Z=new i.New(new g({$:1,$0:F.T.Empty}),null);_0=new x.New(X,Y,Z);return o.New(Z,function(_1){return _1(_0);});};o.WithSubmitClearError=function(X){var Y;function Z(_0,_1){return(X.view(_0))(_1);}Y=new n.New(X.stream,true);return o.New(Y.get_Output(),function(_0){return Z(_0,Y);});};o.WithSubmit=function(X){var Y;function Z(_0,_1){return(X.view(_0))(_1);}Y=new n.New(X.stream,false);return o.New(Y.get_Output(),function(_0){return Z(_0,Y);});};o.ReturnFailure=function(){return o.New(new i.New(new g({$:1,$0:F.T.Empty}),null),a.id);};o.Return=function(X){return o.New(new i.New(new g({$:0,$0:X}),null),a.id);};o.YieldFailure=function(){var X;X=new i.New(new g({$:1,$0:F.T.Empty}),null);return o.New(X,function(Y){return Y(X);});};o.Yield=function(X){var Y;Y=new i.New(new g({$:0,$0:X}),null);return o.New(Y,function(Z){return Z(Y);});};z.$cctor=function(){var X;z.$cctor=a.ignore;z.next=(X=[0],function(){X[0]++;return X[0];});};B=A.HtmlContainer=E.Class({WebSharper_Piglets_Container_2$get_Container:function(){return this.container;},WebSharper_Piglets_Container_2$MoveUp:function(X){var Y,Z;Y=this.container.get_Body().childNodes[X];Z=this.container.get_Body().childNodes[X-1];this.container.get_Body().removeChild(Y);this.container.get_Body().insertBefore(Y,Z);},WebSharper_Piglets_Container_2$Remove:function(X){this.container.get_Body().removeChild(this.container.get_Body().childNodes[X]);},WebSharper_Piglets_Container_2$Add:function(X){this.container.AppendI(X);}},e,B);B.New=E.Ctor(function(X){this.container=X;},B);A.CssResult=function(X,Y,Z,_0){function _1(_2){function _3(_4){var _5;_5=Z(_4);_2.HtmlProvider.SetCss(_2.get_Body(),Y,_5);}_3(X.get_Latest());X.Subscribe(_3);}(function(_2){T.OnAfterRender(_1,_2);}(_0));return _0;};A.Css=function(X,Y,Z,_0){function _1(_2){function _3(_4){var _5;if(_4.$==0){_5=Z(_4.$0);_2.HtmlProvider.SetCss(_2.get_Body(),Y,_5);}}_3(X.get_Latest());X.Subscribe(_3);}(function(_2){T.OnAfterRender(_1,_2);}(_0));return _0;};A.AttrResult=function(X,Y,Z,_0){function _1(_2){function _3(_4){var _5;_5=Z(_4);_2.HtmlProvider.SetAttribute(_2.get_Body(),Y,_5);}_3(X.get_Latest());X.Subscribe(_3);}(function(_2){T.OnAfterRender(_1,_2);}(_0));return _0;};A.Attr=function(X,Y,Z,_0){function _1(_2){function _3(_4){var _5;if(_4.$==0){_5=Z(_4.$0);_2.HtmlProvider.SetAttribute(_2.get_Body(),Y,_5);}}_3(X.get_Latest());X.Subscribe(_3);}(function(_2){T.OnAfterRender(_1,_2);}(_0));return _0;};A.Link=function(X){var Y,Z;function _0(_1){a.jQuery(_1.get_Body()).on("click",function(_2){X.WebSharper_Piglets_Writer_1$Trigger(new g({$:0,$0:null}));return _2.preventDefault();});}Y=(Z=[U.Attr().NewAttr("href","#")],V.Tags().NewTag("a",Z));(function(_1){T.OnAfterRender(_0,_1);}(Y));return Y;};A.ButtonValidate=function(X){var Y;Y=A.Button(X);return A.EnableOnSuccess(X.get_Input(),Y);};A.Button=function(X){var Y;function Z(_0,_1){return X.WebSharper_Piglets_Writer_1$Trigger(new g({$:0,$0:null}));}Y=V.Tags().NewTag("button",[]);(function(_0){W.Events().OnClick(function(_1){return function(_2){return Z(_1,_2);};},_0);}(Y));return Y;};A.SubmitValidate=function(X){var Y;Y=A.Submit(X);return A.EnableOnSuccess(X.get_Input(),Y);};A.Submit=function(X){var Y;function Z(_0,_1){return X.WebSharper_Piglets_Writer_1$Trigger(new g({$:0,$0:null}));}Y=V.Tags().NewTag("input",[U.Attr().NewAttr("type","submit")]);(function(_0){W.Events().OnClick(function(_1){return function(_2){return Z(_1,_2);};},_0);}(Y));return Y;};A.EnableOnSuccess=function(X,Y){function Z(_0){_0.get_Body().disabled=!X.get_Latest().get_isSuccess();X.Subscribe(function(_1){_0.get_Body().disabled=!_1.get_isSuccess();});}(function(_0){T.OnAfterRender(Z,_0);}(Y));return Y;};A.ShowErrors=function(X,Y,Z){return A.ShowResult(X,function(_0){return _0.$==1?Y(F.map(function(_1){return _1.get_Message();},_0.$0)):[];},Z);};A.ShowString=function(X,Y,Z){return A.Show(X,function(_0){var _1;return F.ofArray([(_1=Y(_0),V.Tags().text(_1))]);},Z);};A.Show=function(X,Y,Z){return A.ShowResult(X,function(_0){return _0.$==1?[]:Y(_0.$0);},Z);};A.ShowResult=function(X,Y,Z){var _0,_1;_0=Y(X.get_Latest());_1=O.Get(_0);try{while(_1.MoveNext())Z.AppendI(_1.Current());}finally{if("Dispose"in _1)_1.Dispose();}X.Subscribe(function(_2){var _3,_4;Z.HtmlProvider.Clear(Z.get_Body());_3=Y(_2);_4=O.Get(_3);try{while(_4.MoveNext())Z.AppendI(_4.Current());}finally{if("Dispose"in _4)_4.Dispose();}});return Z;};A.Container=function(X){return new B.New(X);};A.RenderChoice=function(X,Y,Z){return X.Choice(new B.New(Z),Y);};A.RenderMany=function(X,Y,Z){return X.Render(new B.New(Z),Y);};A.Select=function(X,Y){var Z,_0,_1,_2;function _3(_7,_8){var _9;_9=(A.nextId())();return T.add(V.Tags().NewTag("option",[U.Attr().NewAttr("value",_9)]),[V.Tags().text(_8)]);}function _4(_7){if(_7.get_Body().selectedIndex>=0)X.Trigger(new g({$:0,$0:(K.get(Z,_7.get_Body().selectedIndex))[0]}));}function _5(_7,_8){return _4(_7);}function _6(_7){X.Subscribe(function(_8){var _9,_,$;if(_8.$==1);else{_9=_8.$0;_=K.tryFindIndex(function(ba){return Q.Equals(_9,ba[0]);},Z);_==null?void 0:($=K.get(_0,_.$0),$.HtmlProvider.SetAttribute($.get_Body(),"selected",""));}});}(A.nextId())();Z=K.ofSeq(Y);_0=K.map(function(_7){return _3(_7[0],_7[1]);},Z);_1=(_2=V.Tags().NewTag("select",_0),(function(_7){W.Events().OnChange(function(_8){return function(_9){return _5(_8,_9);};},_7);}(_2),_2));(function(_7){T.OnAfterRender(_6,_7);}(_1));return _1;};A.RadioLabelled=function(X,Y){var Z,_0;function _1(_2,_3){return function(_4){var _5,_6,_7;_5=(A.nextId())();_6=[T.add(_4,[U.Attr().NewAttr("id",_5)]),(_7=[U.Attr().NewAttr("for",_5),V.Tags().text(_3)],V.Tags().NewTag("label",_7))];return V.Tags().NewTag("span",_6);};}Z=(_0=A.Radio(X,L.map(function(_2){return _2[0];},Y)),(((E.Curried3(L.map2))(function(_2,_3){return(function(_4){return _1(_4[0],_4[1]);}(_2))(_3);}))(Y))(_0));return V.Tags().NewTag("div",Z);};A.Radio=function(X,Y){var Z,_0,_1;function _2(_3){var _4;function _5(_6,_7){_7.get_Body().checked=Q.Equals(_6,_4);}if(_3.$==1);else{_4=_3.$0;(((E.Curried3(F.iter2))(_5))(_0))(_1);}}Z=(A.nextId())();_0=F.ofSeq(Y);_1=F.map(function(_3){var _4;function _5(_7){if(_7.get_Body().checked)X.Trigger(new g({$:0,$0:_3}));}function _6(_7,_8){return _5(_7);}_4=V.Tags().NewTag("input",[U.Attr().NewAttr("type","radio"),U.Attr().NewAttr("name",Z)]);(function(_7){W.Events().OnChange(function(_8){return function(_9){return _6(_8,_9);};},_7);}(_4));return _4;},_0);_2(X.get_Latest());X.Subscribe(_2);return _1;};A.CheckBox=function(X){var Y,Z,_0;Y=(A.nextId())();Z=V.Tags().NewTag("input",[U.Attr().NewAttr("type","checkbox"),U.Attr().NewAttr("id",Y)]);_0=X.get_Latest();_0.$==0?Z.get_Body().checked=_0.$0:void 0;X.Subscribe(function(_1){var _2;if(_1.$==1);else{_2=_1.$0;!Q.Equals(Z.get_Body().checked,_2)?Z.get_Body().checked=_2:void 0;}});Z.get_Body().addEventListener("change",function(){X.Trigger(new g({$:0,$0:Z.get_Body().checked}));},true);return Z;};A.TextArea=function(X){var Y,Z;function _0(_1){X.Trigger(new g({$:0,$0:Y.get_Value()}));}Y=V.Tags().NewTag("textarea",[]);Z=X.get_Latest();Z.$==0?Y.set_Value(Z.$0):void 0;X.Subscribe(function(_1){var _2;if(_1.$==1);else{_2=_1.$0;Y.get_Value()!==_2?Y.set_Value(_2):void 0;}});Y.get_Body().addEventListener("keyup",_0,true);Y.get_Body().addEventListener("change",_0,true);return Y;};A.IntInput=function(X){return A.input("number",a.Number,a.String,X);};A.WithLabelAfter=function(X,Y){var Z,_0,_1;Z=(A.nextId())();_0=[T.add(Y,[U.Attr().NewAttr("id",Z)]),(_1=[U.Attr().NewAttr("for",Z),V.Tags().text(X)],V.Tags().NewTag("label",_1))];return V.Tags().NewTag("span",_0);};A.WithLabel=function(X,Y){var Z,_0,_1;Z=(A.nextId())();_0=[(_1=[U.Attr().NewAttr("for",Z),V.Tags().text(X)],V.Tags().NewTag("label",_1)),T.add(Y,[U.Attr().NewAttr("id",Z)])];return V.Tags().NewTag("span",_0);};A.input=function(X,Y,Z,_0){var _1,_2;function _3(_4){var _5;_5=new g({$:0,$0:Y(_1.get_Value())});!Q.Equals(_5,_0.get_Latest())?_0.Trigger(_5):void 0;}_1=V.Tags().NewTag("input",[U.Attr().NewAttr("type",X)]);_2=_0.get_Latest();_2.$==0?_1.set_Value(Z(_2.$0)):void 0;_0.Subscribe(function(_4){var _5;if(_4.$==1);else{_5=Z(_4.$0);_1.get_Value()!==_5?_1.set_Value(_5):void 0;}});_1.get_Body().addEventListener("keyup",_3,true);_1.get_Body().addEventListener("change",_3,true);return _1;};A.nextId=function(){C.$cctor();return C.nextId;};C.$cctor=function(){var X;C.$cctor=a.ignore;C.nextId=(X=[0],function(){X[0]++;return"pl__"+a.String(X[0]);});};}());
