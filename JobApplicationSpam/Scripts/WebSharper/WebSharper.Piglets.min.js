(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V;a=window;b=a.WebSharper=a.WebSharper||{};c=b.Piglets=b.Piglets||{};d=c.Id=c.Id||{};e=c.ErrorMessage=c.ErrorMessage||{};f=c.Result=c.Result||{};g=c.Reader=c.Reader||{};h=c.Stream=c.Stream||{};i=c.Disposable=c.Disposable||{};j=c.ConstReader=c.ConstReader||{};k=c.ConcreteWriter=c.ConcreteWriter||{};l=c.ConcreteReader=c.ConcreteReader||{};m=c.Submitter=c.Submitter||{};n=c.Piglet=c.Piglet||{};o=c.Validation=c.Validation||{};p=c.Pervasives=c.Pervasives||{};q=p["Writer`1"]=p["Writer`1"]||{};r=c.Many=c.Many||{};s=r.Operations=r.Operations||{};t=r.Stream=r.Stream||{};u=r.UnitStream=r.UnitStream||{};v=c.Choose=c.Choose||{};w=v.Stream=v.Stream||{};x=n.Builder=n.Builder||{};y=a.StartupCode$WebSharper_Piglets$Piglets=a.StartupCode$WebSharper_Piglets$Piglets||{};z=c.Controls=c.Controls||{};A=z.HtmlContainer=z.HtmlContainer||{};B=a.StartupCode$WebSharper_Piglets$Controls=a.StartupCode$WebSharper_Piglets$Controls||{};C=a.IntelliFactory;D=C&&C.Runtime;E=b&&b.List;F=b&&b.Util;G=C&&C.Reactive;H=G&&G.HotStream;I=b&&b.Concurrency;J=b&&b.Arrays;K=b&&b.Seq;L=b&&b.Collections;M=L&&L.Dictionary;N=b&&b.Enumerator;O=b&&b.Operators;P=b&&b.Unchecked;Q=b&&b.Html;R=Q&&Q.Client;S=R&&R.Operators;T=R&&R.Attr;U=R&&R.Tags;V=R&&R.EventsPervasives;d.next=function(){y.$cctor();return y.next;};e=c.ErrorMessage=D.Class({get_Source:function(){return this.source;},get_Message:function(){return this.message;}},b.Obj,e);e.Create=function(W,X){return new e.New(W,X.get_Id());};e.New=D.Ctor(function(W,X){this.message=W;this.source=X;},e);f=c.Result=D.Class({get_isSuccess:function(){return this.$==1?false:true;}},null,f);f.Bind=function(W){return function(X){return X.$==1?new f({$:1,$0:X.$0}):W(X.$0);};};f.Iter=function(W){return function(X){if(X.$==1);else W(X.$0);};};f.Map2=function(W,X,Y){var Z;switch(X.$==1?Y.$==1?(Z=[X.$0,Y.$0],1):(Z=X.$0,2):Y.$==1?(Z=Y.$0,2):(Z=[X.$0,Y.$0],0)){case 0:return new f({$:0,$0:W(Z[0],Z[1])});break;case 1:return new f({$:1,$0:E.append(Z[0],Z[1])});break;case 2:return new f({$:1,$0:Z});break;}};f.Map=function(W,X){return X.$==1?new f({$:1,$0:X.$0}):new f({$:0,$0:W(X.$0)});};f.Join=function(W){var X;return(W.$==0?W.$0.$==0?(X=W.$0.$0,false):(X=W.$0.$0,true):(X=W.$0,true))?new f({$:1,$0:X}):new f({$:0,$0:X});};f.Ap=function(W,X){var Y;switch(W.$==1?X.$==1?(Y=[W.$0,X.$0],2):(Y=W.$0,1):X.$==1?(Y=X.$0,1):(Y=[W.$0,X.$0],0)){case 0:return new f({$:0,$0:Y[0](Y[1])});break;case 1:return new f({$:1,$0:Y});break;case 2:return new f({$:1,$0:E.append(Y[0],Y[1])});break;}};f.Failwith=function(W){return new f({$:1,$0:E.ofArray([new e.New(W,0)])});};g=c.Reader=D.Class({Through:function(W){var X,Y;X=this;Y=new h.New(this.get_Latest(),null);W.Subscribe(function(Z){var _0,_1;if(Z.$==1){_0=X.get_Latest();_1=E.filter(function(_2){return _2.get_Source()===X.get_Id();},Z.$0);_1.$==0?Y.Trigger(X.get_Latest()):_0.$==1?Y.Trigger(new f({$:1,$0:E.append(_0.$0,_1)})):Y.Trigger(new f({$:1,$0:_1}));}else Y.Trigger(X.get_Latest());});return Y;},get_Id:function(){return this.id;},SubscribeImmediate:function(W){return this.Subscribe(W);}},b.Obj,g);g.ConstResult=function(W){return new j.New(W);};g.Const=function(W){return new j.New(new f({$:0,$0:W}));};g.MapToResult=function(W,X){return g.MapResult(f.Bind(W),X);};g.Map2=function(W,X,Y){return g.MapResult2(function(Z,_0){return f.Map2(W,Z,_0);},X,Y);};g.Map=function(W,X){return g.MapResult(function(Y){return f.Map(W,Y);},X);};g.MapResult2=function(W,X,Y){var Z;Z=new h.New(W(X.get_Latest(),Y.get_Latest()),null);X.Subscribe(function(_0){Z.Trigger(W(_0,Y.get_Latest()));});Y.Subscribe(function(_0){Z.Trigger(W(X.get_Latest(),_0));});return Z;};g.MapResult=function(W,X){var Y;function Z(_0){Y.Trigger(_0);}Y=new h.New(W(X.get_Latest()),null);X.Subscribe(function(_0){return Z(W(_0));});return Y;};g.New=D.Ctor(function(W){this.id=W;},g);h=c.Stream=D.Class({Write:function(W){var X;X=this;return new k.New$1(function(Y){if(Y.$==0)X.Trigger(new f({$:0,$0:W}));else X.Trigger(new f({$:1,$0:Y.$0}));});},Trigger:function(W){this.s.Trigger(W);},Subscribe:function(W){return this.s.Subscribe(F.observer(W));},get_Latest:function(){return this.s.Latest[0].$0;},WebSharper_Piglets_Writer_1$Trigger:function(W){this.Trigger(W);}},g,h);h.New=D.Ctor(function(W,X){h.New$1.call(this,H.New$1(W),X);},h);h.New$1=D.Ctor(function(W,X){g.New.call(this,X==null?(d.next())():X.$0);this.s=W;},h);i=c.Disposable=D.Class({Dispose:function(){this.dispose();}},b.Obj,i);i.New=D.Ctor(function(W){this.dispose=W;},i);j=c.ConstReader=D.Class({Subscribe:function(W){return new i.New(a.ignore);},get_Latest:function(){return this.x;}},g,j);j.New=D.Ctor(function(W){g.New.call(this,(d.next())());this.x=W;},j);k=c.ConcreteWriter=D.Class({WebSharper_Piglets_Writer_1$Trigger:function(W){this.trigger(W);}},b.Obj,k);k.New=function(W){return new k.New$1(function(X){if(X.$==1);else W(X.$0);});};k.New$1=D.Ctor(function(W){this.trigger=W;},k);l=c.ConcreteReader=D.Class({Subscribe:function(W){return this.subscribe(W);},get_Latest:function(){return this.latest();}},g,l);l.New=D.Ctor(function(W,X){g.New.call(this,(d.next())());this.latest=W;this.subscribe=X;},l);m=c.Submitter=D.Class({Trigger:function(){this.writer.WebSharper_Piglets_Writer_1$Trigger(new f({$:0,$0:null}));},get_Output:function(){return this.output;},get_Input:function(){return this.input;},Subscribe:function(W){return this.output.Subscribe(W);},get_Latest:function(){return this.output.get_Latest();},WebSharper_Piglets_Writer_1$Trigger:function(W){this.writer.WebSharper_Piglets_Writer_1$Trigger(W);}},g,m);m.New=D.Ctor(function(W,X){var Y;Y=this;g.New.call(this,(d.next())());this.input=W;this.output=new h.New(new f({$:1,$0:E.T.Empty}),null);this.writer=new k.New$1(function(Z){var _0,_1;_1=Y.input.get_Latest();switch(Z.$==0?_1.$==0?(_0=_1.$0,2):(_0=_1.$0,1):_1.$==0?(_0=Z.$0,1):(_0=[Z.$0,_1.$0],0)){case 0:Y.output.Trigger(new f({$:1,$0:E.append(_0[0],_0[1])}));break;case 1:Y.output.Trigger(new f({$:1,$0:_0}));break;case 2:Y.output.Trigger(new f({$:0,$0:_0}));break;}});X?this.input.Subscribe(function(){var Z,_0;Z=Y.output.get_Latest();Z.$==1&&(Z.$0.$==0&&true)?void 0:Y.output.Trigger(new f({$:1,$0:E.T.Empty}));}):void 0;},m);h.Map=function(W,X,Y){var Z,_0,_1;Z=new h.New(f.Map(W,Y.get_Latest()),{$:1,$0:Y.get_Id()});_0=[Y.get_Latest()];_1=[Z.get_Latest()];Y.Subscribe(function(_2){if(_0[0]!==_2){_1[0]=f.Map(W,_2);Z.Trigger(_1[0]);}});Z.Subscribe(function(_2){if(_1[0]!==_2){_0[0]=f.Map(X,_2);Y.Trigger(_0[0]);}});return Z;};h.ApJoin=function(W,X){var Y;Y=new h.New(f.Ap(W.get_Latest(),f.Join(X.get_Latest())),null);W.Subscribe(function(Z){Y.Trigger(f.Ap(Z,f.Join(X.get_Latest())));});X.Subscribe(function(Z){Y.Trigger(f.Ap(W.get_Latest(),f.Join(Z)));});return Y;};h.Ap=function(W,X){var Y;Y=new h.New(f.Ap(W.get_Latest(),X.get_Latest()),null);W.Subscribe(function(Z){Y.Trigger(f.Ap(Z,X.get_Latest()));});X.Subscribe(function(Z){Y.Trigger(f.Ap(W.get_Latest(),Z));});return Y;};n=c.Piglet=D.Class({get_Stream:function(){return this.stream;}},null,n);n.New=function(W,X){return new n({stream:W,view:X});};o.IsMatch=function(W,X,Y){return o.Is(o.Match(W),X,Y);};o.IsNotEmpty=function(W,X){return o.Is(o.NotEmpty,W,X);};o.Match=function(W){var X;X=new a.RegExp(W);return function(Y){return X.test(Y);};};o.NotEmpty=function(W){return W!=="";};o.Is=function(W,X,Y){var Z;Z=new h.New(Y.stream.get_Latest(),{$:1,$0:Y.stream.get_Id()});Y.stream.Subscribe(function(_0){if(_0.$==0){if(W(_0.$0))Z.Trigger(new f({$:0,$0:_0.$0}));else Z.Trigger(new f({$:1,$0:E.ofArray([new e.New(X,Z.get_Id())])}));}else Z.Trigger(new f({$:1,$0:_0.$0}));});return n.New(Z,Y.view);};o["Is'"]=function(W,X,Y){var Z;Z=new h.New(Y.stream.get_Latest(),{$:1,$0:Y.stream.get_Id()});Y.stream.Subscribe(function(_0){if(_0.$==0){if(W(_0.$0))Z.Trigger(new f({$:0,$0:_0.$0}));else Z.Trigger(new f({$:1,$0:E.ofArray([X])}));}else Z.Trigger(new f({$:1,$0:_0.$0}));});return n.New(Z,Y.view);};p.op_LessMultiplyQmarkGreater=function(W,X){var Y,Z;return n.New(h.ApJoin(W.stream,X.stream),(Y=W.view,(Z=X.view,function(_0){return Z(Y(_0));})));};p.op_LessMultiplyGreater=function(W,X){var Y,Z;return n.New(h.Ap(W.stream,X.stream),(Y=W.view,(Z=X.view,function(_0){return Z(Y(_0));})));};q.WrapAsync=function(W,X){return q.WrapToAsyncResult(function(Y){var Z;Z=null;return I.Delay(function(){return I.Bind(W(Y),function(_0){return I.Return(new f({$:0,$0:_0}));});});},X);};q.WrapToAsyncResult=function(W,X){return q.WrapAsyncResult(function(Y){var Z;Z=null;return I.Delay(function(){return Y.$==1?I.Return(new f({$:1,$0:Y.$0})):W(Y.$0);});},X);};q.WrapAsyncResult=function(W,X){return new k.New$1(function(Y){var Z;I.Start((Z=null,I.Delay(function(){return I.Bind(W(Y),function(_0){X.WebSharper_Piglets_Writer_1$Trigger(_0);return I.Zero();});})),null);});};q.WrapResult=function(W,X){return new k.New$1(function(Y){X.WebSharper_Piglets_Writer_1$Trigger(W(Y));});};q.WrapToResult=function(W,X){return new k.New$1(function(Y){X.WebSharper_Piglets_Writer_1$Trigger((f.Bind(W))(Y));});};q.Wrap=function(W,X){return new k.New$1(function(Y){X.WebSharper_Piglets_Writer_1$Trigger(f.Map(W,Y));});};s=r.Operations=D.Class({get_MoveDown:function(){return this.moveDown;},get_MoveUp:function(){return this.moveUp;},get_Delete:function(){return k.New(this["delete"]);}},b.Obj,s);s.New=D.Ctor(function(W,X,Y){this["delete"]=W;this.moveUp=X;this.moveDown=Y;},s);t=r.Stream=D.Class({update:function(){this.out.Trigger(f.Map(function(W){return J.ofList(E.rev(W));},K.fold(function(W,X){var Y,Z;Z=X.get_Latest();switch(W.$==1?Z.$==1?(Y=[W.$0,Z.$0],2):(Y=W.$0,1):Z.$==1?(Y=Z.$0,1):(Y=[W.$0,Z.$0],0)){case 0:return new f({$:0,$0:new E.T({$:1,$0:Y[1],$1:Y[0]})});break;case 1:return new f({$:1,$0:Y});break;case 2:return new f({$:1,$0:E.append(Y[1],Y[0])});break;}},new f({$:0,$0:E.T.Empty}),this.streams)));},AddRender:function(W){return this.adder.view(W);},get_Add:function(){return this.adder.stream;},Render:function(W,X){var Y,Z;function _0(_1){var _2,_3,_4,_5,_6,_7,_8,_9;function _(){return K.findIndex(function(bc){return bc.get_Id()===_2.stream.get_Id();},Y.streams);}function $(bc){var bd;if(bc>0&&bc<J.length(Y.streams)){bd=J.get(Y.streams,bc);J.set(Y.streams,bc,J.get(Y.streams,bc-1));J.set(Y.streams,bc-1,bd);W.WebSharper_Piglets_Container_2$MoveUp(bc);Y.update();}}function ba(){return _()>0?new f({$:0,$0:null}):new f({$:1,$0:E.T.Empty});}function bb(){return _()<J.length(Y.streams)-1?new f({$:0,$0:null}):new f({$:1,$0:E.T.Empty});}_2=Y.p(_1);Y.streams.push(_2.stream);_2.stream.Subscribe(function(){Y.update();});_3=new h.New(ba(),null);_4=new h.New(bb(),null);_5=Y.out.Subscribe(function(){_3.Trigger(ba());_4.Trigger(bb());});_6=new m.New(_3,false);_7=new m.New(_4,false);_8=_6.Subscribe(f.Iter(function(){$(_());}));_9=_7.Subscribe(f.Iter(function(){$(_()+1);}));W.WebSharper_Piglets_Container_2$Add(_2.view(X(new s.New(function(){var bc,bd;bc=_();bd=Y.streams;bd.splice.apply(bd,[bc,1]);W.WebSharper_Piglets_Container_2$Remove(bc);_5.Dispose();_8.Dispose();_9.Dispose();Y.update();},_6,_7))));}Y=this;Z=this.out.get_Latest();Z.$==0?J.iter(_0,Z.$0):void 0;this.adder.stream.Subscribe(function(_1){if(_1.$==0)_0(_1.$0);});return W.WebSharper_Piglets_Container_2$get_Container();},get_Latest:function(){return this.out.get_Latest();},Subscribe:function(W){return this.out.Subscribe(W);}},g,t);t.New=D.Ctor(function(W,X,Y){g.New.call(this,X.get_Id());this.p=W;this.out=X;this.adder=Y;this.streams=[];},t);u=r.UnitStream=D.Class({get_Add$1:function(){return this.submitStream;}},t,u);u.New=D.Ctor(function(W,X,Y,Z){var _0,_1,_2;t.New.call(this,W,X,Y);this.submitStream=(_0=new h.New(new f({$:1,$0:E.T.Empty}),null),(_1=(_2=Y.get_Stream(),function(_3){_2.Trigger(_3);}),(_0.Subscribe(function(_3){if(_3.$==0)_1(new f({$:0,$0:Z}));else _1(new f({$:1,$0:_3.$0}));}),_0)));},u);w=v.Stream=D.Class({Choice:function(W,X){var Y,Z,_0;Y=this;Z=new M.New$5();_0=[false];this.subscriptions[0]=new E.T({$:1,$0:this.pStream.Subscribe(function(_1){var _2,_3,_4;if(_1.$==0){_2=_1.$0[1];_3=_1.$0[0];_4=Z.ContainsKey(_3)?Z.get_Item(_3):_2.view(X);Y.out.Trigger(_2.stream.get_Latest());_0[0]?W.WebSharper_Piglets_Container_2$Remove(0):void 0;_0[0]=true;W.WebSharper_Piglets_Container_2$Add(_4);}}),$1:this.subscriptions[0]});return W.WebSharper_Piglets_Container_2$get_Container();},get_ChooserStream:function(){return this.chooser.stream;},Chooser:function(W){return this.chooser.view(W);},Subscribe:function(W){return this.out.Subscribe(W);},get_Latest:function(){return this.out.get_Latest();},Dispose:function(){var W,X;W=this.subscriptions[0];X=N.Get(W);try{while(X.MoveNext())X.Current().Dispose();}finally{if("Dispose"in X)X.Dispose();}K.iter(function(Y){(O.KeyValue(Y))[1][1].Dispose();},this.choiceSubscriptions);}},g,w);w.New=D.Ctor(function(W,X,Y){var Z;Z=this;g.New.call(this,Y.get_Id());this.chooser=W;this.out=Y;this.pStream=new h.New(new f({$:1,$0:E.T.Empty}),null);this.choiceSubscriptions=new M.New$5();this.subscriptions=[E.ofArray([this.chooser.stream.Subscribe(function(_0){Z.pStream.Trigger(f.Map(function(_1){var _2,_3;return[_1,Z.choiceSubscriptions.ContainsKey(_1)?(Z.choiceSubscriptions.get_Item(_1))[0]:(_2=X(_1),(Z.choiceSubscriptions.set_Item(_1,[_2,_2.stream.Subscribe((_3=Z.out,function(_4){_3.Trigger(_4);}))]),_2))];},_0));})])];},w);x=n.Builder=D.Class({Zero:function(){return n.ReturnFailure();},YieldFrom:a.id,Yield:function(W){return n.Yield(W);},ReturnFrom:a.id,Return:function(W){return n.Return(W);},Bind:function(W,X){return n.Choose(W,X);}},null,x);x.Do=new x({$:0});n.Confirm=function(W,X,Y){var Z,_0;function _1(_2,_3){return[_2,_3];}Z=n.Yield(W);return n.MapViewArgs(function(_2){return function(_3){return _1(_2,_3);};},n.Map(function(_2){return _2[0];},(_0=p.op_LessMultiplyGreater(p.op_LessMultiplyGreater(n.Return(function(_2){return function(_3){return[_2,_3];};}),X(n.Yield(W))),Z),o["Is'"](function(_2){return P.Equals(_2[0],_2[1]);},e.Create(Y,Z.get_Stream()),_0))));};n.YieldOption=function(W,X){function Y(_0){return _0!=null&&_0.$==1?_0.$0:X;}function Z(_0){return P.Equals(_0,X)?null:{$:1,$0:_0};}return n.MapViewArgs(function(_0){return h.Map(Y,Z,_0);},n.Yield(W));};n.MapViewArgs=function(W,X){var Y;return n.New(X.stream,(Y=X.view,function(Z){return Z(Y(W));}));};n.Render=function(W,X){return X.view(W);};n.Run=function(W,X){return n.RunResult(f.Iter(W),X);};n.RunResult=function(W,X){X.stream.Subscribe(W);return X;};n.FlushErrors=function(W){return n.MapResult(function(X){return X.$==1?new f({$:1,$0:E.T.Empty}):X;},W);};n.MapWithWriter=function(W,X){function Y(Z,_0){return _0.$==0?W(Z,_0.$0):Z.WebSharper_Piglets_Writer_1$Trigger(new f({$:1,$0:_0.$0}));}return n.MapResultWithWriter(function(Z){return function(_0){return Y(Z,_0);};},X);};n.MapResultWithWriter=function(W,X){var Y;Y=new h.New(new f({$:1,$0:E.T.Empty}),null);X.stream.Subscribe(W(Y));return n.New(Y,X.view);};n.MapAsync=function(W,X){return n.MapAsyncResult(function(Y){var Z,_0;return Y.$==0?(Z=Y.$0,(_0=null,I.Delay(function(){return I.Bind(W(Z),function(_1){return I.Return(new f({$:0,$0:_1}));});}))):I.Return(new f({$:1,$0:Y.$0}));},X);};n.MapToAsyncResult=function(W,X){return n.MapAsyncResult(function(Y){return Y.$==0?W(Y.$0):I.Return(new f({$:1,$0:Y.$0}));},X);};n.MapAsyncResult=function(W,X){var Y,Z;Y=new h.New(new f({$:1,$0:E.T.Empty}),null);X.stream.Subscribe(function(_0){var _1;I.Start((_1=null,I.Delay(function(){return I.Bind(W(_0),function(_2){Y.Trigger(_2);return I.Return(null);});})),null);});I.Start((Z=null,I.Delay(function(){return I.Bind(W(X.stream.get_Latest()),function(_0){Y.Trigger(_0);return I.Return(null);});})),null);return n.New(Y,X.view);};n.Map=function(W,X){return n.MapResult(function(Y){return Y.$==0?new f({$:0,$0:W(Y.$0)}):new f({$:1,$0:Y.$0});},X);};n.MapToResult=function(W,X){return n.MapResult(function(Y){return Y.$==0?W(Y.$0):new f({$:1,$0:Y.$0});},X);};n.MapResult=function(W,X){var Y;function Z(_0){Y.Trigger(_0);}Y=new h.New(W(X.stream.get_Latest()),null);X.stream.Subscribe(function(_0){return Z(W(_0));});return n.New(Y,X.view);};n.TransmitWriter=function(W){var X;function Y(Z,_0){return(W.view(Z))(_0);}return n.New(W.stream,(X=W.stream,function(Z){return Y(Z,X);}));};n.TransmitReader=function(W){var X;function Y(Z,_0){return(W.view(Z))(_0);}return n.New(W.stream,(X=W.stream,function(Z){return Y(Z,X);}));};n.TransmitReaderMap=function(W,X){var Y;function Z(_0,_1){return(X.view(_0))(_1);}return n.New(X.stream,(Y=g.Map(W,X.stream),function(_0){return Z(_0,Y);}));};n.TransmitReaderMapToResult=function(W,X){var Y;function Z(_0,_1){return(X.view(_0))(_1);}return n.New(X.stream,(Y=g.MapToResult(W,X.stream),function(_0){return Z(_0,Y);}));};n.TransmitReaderMapResult=function(W,X){var Y;function Z(_0,_1){return(X.view(_0))(_1);}return n.New(X.stream,(Y=g.MapResult(W,X.stream),function(_0){return Z(_0,Y);}));};n.TransmitStream=function(W){var X;function Y(Z,_0){return(W.view(Z))(_0);}return n.New(W.stream,(X=W.stream,function(Z){return Y(Z,X);}));};n.Many=function(W,X){return n.ManyInit([W],W,X);};n.ManyInit=function(W,X,Y){var Z,_0;Z=new h.New(new f({$:0,$0:W}),null);_0=new u.New(Y,Z,Y(X),X);return n.New(Z,function(_1){return _1(_0);});};n.ManyPiglet=function(W,X,Y){var Z,_0;Z=new h.New(new f({$:0,$0:W}),null);_0=new t.New(Y,Z,X);return n.New(Z,function(_1){return _1(_0);});};n.Choose=function(W,X){var Y,Z;Y=new h.New(new f({$:1,$0:E.T.Empty}),null);Z=new w.New(W,X,Y);return n.New(Y,function(_0){return _0(Z);});};n.WithSubmitClearError=function(W){var X;function Y(Z,_0){return(W.view(Z))(_0);}X=new m.New(W.stream,true);return n.New(X.get_Output(),function(Z){return Y(Z,X);});};n.WithSubmit=function(W){var X;function Y(Z,_0){return(W.view(Z))(_0);}X=new m.New(W.stream,false);return n.New(X.get_Output(),function(Z){return Y(Z,X);});};n.ReturnFailure=function(){return n.New(new h.New(new f({$:1,$0:E.T.Empty}),null),a.id);};n.Return=function(W){return n.New(new h.New(new f({$:0,$0:W}),null),a.id);};n.YieldFailure=function(){var W;W=new h.New(new f({$:1,$0:E.T.Empty}),null);return n.New(W,function(X){return X(W);});};n.Yield=function(W){var X;X=new h.New(new f({$:0,$0:W}),null);return n.New(X,function(Y){return Y(X);});};y.$cctor=function(){var W;y.$cctor=a.ignore;y.next=(W=[0],function(){W[0]++;return W[0];});};A=z.HtmlContainer=D.Class({WebSharper_Piglets_Container_2$get_Container:function(){return this.container;},WebSharper_Piglets_Container_2$MoveUp:function(W){var X,Y;X=this.container.get_Body().childNodes[W];Y=this.container.get_Body().childNodes[W-1];this.container.get_Body().removeChild(X);this.container.get_Body().insertBefore(X,Y);},WebSharper_Piglets_Container_2$Remove:function(W){this.container.get_Body().removeChild(this.container.get_Body().childNodes[W]);},WebSharper_Piglets_Container_2$Add:function(W){this.container.AppendI(W);}},b.Obj,A);A.New=D.Ctor(function(W){this.container=W;},A);z.CssResult=function(W,X,Y,Z){function _0(_1){function _2(_3){var _4;_4=Y(_3);_1.HtmlProvider.SetCss(_1.get_Body(),X,_4);}_2(W.get_Latest());W.Subscribe(_2);}(function(_1){S.OnAfterRender(_0,_1);}(Z));return Z;};z.Css=function(W,X,Y,Z){function _0(_1){function _2(_3){var _4;if(_3.$==0){_4=Y(_3.$0);_1.HtmlProvider.SetCss(_1.get_Body(),X,_4);}}_2(W.get_Latest());W.Subscribe(_2);}(function(_1){S.OnAfterRender(_0,_1);}(Z));return Z;};z.AttrResult=function(W,X,Y,Z){function _0(_1){function _2(_3){var _4;_4=Y(_3);_1.HtmlProvider.SetAttribute(_1.get_Body(),X,_4);}_2(W.get_Latest());W.Subscribe(_2);}(function(_1){S.OnAfterRender(_0,_1);}(Z));return Z;};z.Attr=function(W,X,Y,Z){function _0(_1){function _2(_3){var _4;if(_3.$==0){_4=Y(_3.$0);_1.HtmlProvider.SetAttribute(_1.get_Body(),X,_4);}}_2(W.get_Latest());W.Subscribe(_2);}(function(_1){S.OnAfterRender(_0,_1);}(Z));return Z;};z.Link=function(W){var X,Y;function Z(_0){a.jQuery(_0.get_Body()).on("click",function(_1){W.WebSharper_Piglets_Writer_1$Trigger(new f({$:0,$0:null}));return _1.preventDefault();});}X=(Y=[T.Attr().NewAttr("href","#")],U.Tags().NewTag("a",Y));(function(_0){S.OnAfterRender(Z,_0);}(X));return X;};z.ButtonValidate=function(W){var X;X=z.Button(W);return z.EnableOnSuccess(W.get_Input(),X);};z.Button=function(W){var X;function Y(Z,_0){return W.WebSharper_Piglets_Writer_1$Trigger(new f({$:0,$0:null}));}X=U.Tags().NewTag("button",[]);(function(Z){V.Events().OnClick(function(_0){return function(_1){return Y(_0,_1);};},Z);}(X));return X;};z.SubmitValidate=function(W){var X;X=z.Submit(W);return z.EnableOnSuccess(W.get_Input(),X);};z.Submit=function(W){var X;function Y(Z,_0){return W.WebSharper_Piglets_Writer_1$Trigger(new f({$:0,$0:null}));}X=U.Tags().NewTag("input",[T.Attr().NewAttr("type","submit")]);(function(Z){V.Events().OnClick(function(_0){return function(_1){return Y(_0,_1);};},Z);}(X));return X;};z.EnableOnSuccess=function(W,X){function Y(Z){Z.get_Body().disabled=!W.get_Latest().get_isSuccess();W.Subscribe(function(_0){Z.get_Body().disabled=!_0.get_isSuccess();});}(function(Z){S.OnAfterRender(Y,Z);}(X));return X;};z.ShowErrors=function(W,X,Y){return z.ShowResult(W,function(Z){return Z.$==1?X(E.map(function(_0){return _0.get_Message();},Z.$0)):[];},Y);};z.ShowString=function(W,X,Y){return z.Show(W,function(Z){var _0;return E.ofArray([(_0=X(Z),U.Tags().text(_0))]);},Y);};z.Show=function(W,X,Y){return z.ShowResult(W,function(Z){return Z.$==1?[]:X(Z.$0);},Y);};z.ShowResult=function(W,X,Y){var Z,_0;Z=X(W.get_Latest());_0=N.Get(Z);try{while(_0.MoveNext())Y.AppendI(_0.Current());}finally{if("Dispose"in _0)_0.Dispose();}W.Subscribe(function(_1){var _2,_3;Y.HtmlProvider.Clear(Y.get_Body());_2=X(_1);_3=N.Get(_2);try{while(_3.MoveNext())Y.AppendI(_3.Current());}finally{if("Dispose"in _3)_3.Dispose();}});return Y;};z.Container=function(W){return new A.New(W);};z.RenderChoice=function(W,X,Y){return W.Choice(new A.New(Y),X);};z.RenderMany=function(W,X,Y){return W.Render(new A.New(Y),X);};z.Select=function(W,X){var Y,Z,_0,_1;function _2(_6,_7){var _8;_8=(z.nextId())();return S.add(U.Tags().NewTag("option",[T.Attr().NewAttr("value",_8)]),[U.Tags().text(_7)]);}function _3(_6){if(_6.get_Body().selectedIndex>=0)W.Trigger(new f({$:0,$0:(J.get(Y,_6.get_Body().selectedIndex))[0]}));}function _4(_6,_7){return _3(_6);}function _5(_6){W.Subscribe(function(_7){var _8,_9,_;if(_7.$==1);else{_8=_7.$0;_9=J.tryFindIndex(function($){return P.Equals(_8,$[0]);},Y);_9==null?void 0:(_=J.get(Z,_9.$0),_.HtmlProvider.SetAttribute(_.get_Body(),"selected",""));}});}(z.nextId())();Y=J.ofSeq(X);Z=J.map(function(_6){return _2(_6[0],_6[1]);},Y);_0=(_1=U.Tags().NewTag("select",Z),(function(_6){V.Events().OnChange(function(_7){return function(_8){return _4(_7,_8);};},_6);}(_1),_1));(function(_6){S.OnAfterRender(_5,_6);}(_0));return _0;};z.RadioLabelled=function(W,X){var Y,Z;function _0(_1,_2){return function(_3){var _4,_5,_6;_4=(z.nextId())();_5=[S.add(_3,[T.Attr().NewAttr("id",_4)]),(_6=[T.Attr().NewAttr("for",_4),U.Tags().text(_2)],U.Tags().NewTag("label",_6))];return U.Tags().NewTag("span",_5);};}Y=(Z=z.Radio(W,K.map(function(_1){return _1[0];},X)),(((D.Curried3(K.map2))(function(_1,_2){return(function(_3){return _0(_3[0],_3[1]);}(_1))(_2);}))(X))(Z));return U.Tags().NewTag("div",Y);};z.Radio=function(W,X){var Y,Z,_0;function _1(_2){var _3;function _4(_5,_6){_6.get_Body().checked=P.Equals(_5,_3);}if(_2.$==1);else{_3=_2.$0;(((D.Curried3(E.iter2))(_4))(Z))(_0);}}Y=(z.nextId())();Z=E.ofSeq(X);_0=E.map(function(_2){var _3;function _4(_6){if(_6.get_Body().checked)W.Trigger(new f({$:0,$0:_2}));}function _5(_6,_7){return _4(_6);}_3=U.Tags().NewTag("input",[T.Attr().NewAttr("type","radio"),T.Attr().NewAttr("name",Y)]);(function(_6){V.Events().OnChange(function(_7){return function(_8){return _5(_7,_8);};},_6);}(_3));return _3;},Z);_1(W.get_Latest());W.Subscribe(_1);return _0;};z.CheckBox=function(W){var X,Y,Z;X=(z.nextId())();Y=U.Tags().NewTag("input",[T.Attr().NewAttr("type","checkbox"),T.Attr().NewAttr("id",X)]);Z=W.get_Latest();Z.$==0?Y.get_Body().checked=Z.$0:void 0;W.Subscribe(function(_0){var _1;if(_0.$==1);else{_1=_0.$0;!P.Equals(Y.get_Body().checked,_1)?Y.get_Body().checked=_1:void 0;}});Y.get_Body().addEventListener("change",function(){W.Trigger(new f({$:0,$0:Y.get_Body().checked}));},true);return Y;};z.TextArea=function(W){var X,Y;function Z(_0){W.Trigger(new f({$:0,$0:X.get_Value()}));}X=U.Tags().NewTag("textarea",[]);Y=W.get_Latest();Y.$==0?X.set_Value(Y.$0):void 0;W.Subscribe(function(_0){var _1;if(_0.$==1);else{_1=_0.$0;X.get_Value()!==_1?X.set_Value(_1):void 0;}});X.get_Body().addEventListener("keyup",Z,true);X.get_Body().addEventListener("change",Z,true);return X;};z.IntInput=function(W){return z.input("number",a.Number,a.String,W);};z.WithLabelAfter=function(W,X){var Y,Z,_0;Y=(z.nextId())();Z=[S.add(X,[T.Attr().NewAttr("id",Y)]),(_0=[T.Attr().NewAttr("for",Y),U.Tags().text(W)],U.Tags().NewTag("label",_0))];return U.Tags().NewTag("span",Z);};z.WithLabel=function(W,X){var Y,Z,_0;Y=(z.nextId())();Z=[(_0=[T.Attr().NewAttr("for",Y),U.Tags().text(W)],U.Tags().NewTag("label",_0)),S.add(X,[T.Attr().NewAttr("id",Y)])];return U.Tags().NewTag("span",Z);};z.input=function(W,X,Y,Z){var _0,_1;function _2(_3){var _4;_4=new f({$:0,$0:X(_0.get_Value())});!P.Equals(_4,Z.get_Latest())?Z.Trigger(_4):void 0;}_0=U.Tags().NewTag("input",[T.Attr().NewAttr("type",W)]);_1=Z.get_Latest();_1.$==0?_0.set_Value(Y(_1.$0)):void 0;Z.Subscribe(function(_3){var _4;if(_3.$==1);else{_4=Y(_3.$0);_0.get_Value()!==_4?_0.set_Value(_4):void 0;}});_0.get_Body().addEventListener("keyup",_2,true);_0.get_Body().addEventListener("change",_2,true);return _0;};z.nextId=function(){B.$cctor();return B.nextId;};B.$cctor=function(){var W;B.$cctor=a.ignore;B.nextId=(W=[0],function(){W[0]++;return"pl__"+a.String(W[0]);});};}());
